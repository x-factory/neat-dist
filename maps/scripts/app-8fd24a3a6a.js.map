{"version":3,"sources":["scripts/app-8fd24a3a6a.js"],"names":["angular","module","UsersController","UserData","$log","$document","AuthService","UserDialog","activate","getSearchField","searchField","doc","getElementById","element","ready","vm","showEnabled","getUsers","then","successUsers","assignUsers","users","data","type","info","getDisabledUsers","disabledUsers","switchUsers","addOrDeleteAll","ev","showAdd","showConfirm","name","changeRole","user","privilege","updateRole","id","focusSearch","focus","roleClass","resetText","disabled","active","this","isAdmin","isSelf","$inject","controller","$mdDialog","$mdToast","idx","confirmTitle","dialog","text","del","content","ariaLabel","ok","confirmAction","deleteUser","splice","confirmToast","message","delAll","deleteAllDisabled","length","affected","reset","resetUser","enable","enableUser","confirm","title","textContent","targetEvent","cancel","show","simple","position","hideDelay","AddDialogController","$scope","add","createUser","email","push","hide","templateUrl","parent","body","clickOutsideToClose","service","factory","url","$q","$http","get","getUsersComplete","catchErrorFn","actionComplete","errMsg","e","newMessage","description","error","reject","post","put","password","actionErrMsg","MapInit","$window","ApiKey","asyncLoad","asyncUrl","cbName","log","script","createElement","src","appendChild","document","mapsDefer","defer","GMapInitialized","resolve","initialized","promise","MapDialog","byId","MapData","mapIcons","$rootScope","$timeout","createInfoContent","record","address","Location","severity","divider","editBtn","delBtn","initMarkerDialog","types","Gmap","neatMap","magicMarker","marker","infowindow","DialogController","addPlaceSearch","input","searchBox","places","SearchBox","addListener","setBounds","getBounds","getPlaces","place","geometry","location","lng","lat","recordVals","long","user_id","type_id","typeId","isUpdate","update","createRecord","newRecord","latitude","longitude","updateRecord","close","myRecord","setIcon","TypeId","setPosition","locateCurrent","locating","nav","geolocation","getCurrentPosition","pos","coords","geocoder","Geocoder","geocode","results","status","GeocoderStatus","OK","formatted_address","$apply","alert","confirmDelete","markers","performDelete","deleteRecord","deleteUIcleanUp","setMap","indexOf","navigator","getTypes","getDataComplete","getRecords","MapController","mapEl","setupMap","setupControls","google","maps","Map","center","zoom","assignRecordsToMarkers","records","forEach","local","animate","options","icon","map","animation","Animation","DROP","Marker","attachMarkerEvent","self","InfoWindow","addEventListener","showDialog","open","typeArrayToMap","prev","curr","replace","reduce","LoginController","$state","login","getMe","go","enter","charCode","NavController","logout","AuthToken","getToken","localStorage","getItem","setToken","token","setItem","removeItem","authSuccess","authFailed","isLoggedIn","Boolean","getMeComplete","me","getMeFailed","AuthInterceptor","request","config","headers","Authorization","responseError","res","runBlock","watchAuth","toState","preventDefault","$on","debug","run","routerConfig","$stateProvider","$locationProvider","$urlRouterProvider","navView","controllerAs","state","views","otherwise","html5Mode","level","toLowerCase","levels",1,2,3,4,5,"anchor","Point","path","baseUrl","constant","$logProvider","$httpProvider","$mdThemingProvider","$mdIconProvider","debugEnabled","interceptors","neatGrey","extendPalette","900","neatRed","400","definePalette","theme","primaryPalette","default","accentPalette","hue-2","warnPalette","$templateCache"],"mappings":"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","file":"scripts/app-8fd24a3a6a.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('neatClient', [\n      'ngAnimate',\n      'ngCookies',\n      'ngSanitize',\n      'ngMessages',\n      'ngAria',\n      'ui.router',\n      'ngMaterial'\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('UsersController', UsersController);\n\n  /** @ngInject */\n  function UsersController(\n    UserData,\n    $log,\n    $document,\n    AuthService,\n    UserDialog\n  ) {\n    var vm = this;\n    var doc = $document[0];\n    var users;\n    var disabledUsers;\n    var searchField;\n    var showAdd = UserDialog.showAdd;\n\n    vm.isAdmin = AuthService.isAdmin;\n    vm.isSelf = AuthService.isSelf;\n    vm.switchUsers = switchUsers;\n    vm.showConfirm = UserDialog.showConfirm;\n    vm.addOrDeleteAll = addOrDeleteAll;\n    vm.changeRole = changeRole;\n    vm.focusSearch = focusSearch;\n    vm.roleClass = roleClass;\n    vm.resetText = resetText;\n\n    activate();\n\n    function activate() {\n      angular.element(doc).ready(getSearchField);\n      vm.showEnabled = true;\n      return getUsers().then(successUsers);\n      function getSearchField() {\n        searchField = doc.getElementById('user-search');\n      }\n    }\n\n    /////////////////////////////////\n    // GET users\n    // /////////////////////////////\n    function getUsers() {\n      return UserData.getUsers()\n        .then(assignUsers(users));\n    }\n\n    function assignUsers(users) {\n      return function(data) {\n        users = data;\n        vm.users = users;\n        return vm.users;\n      };\n    }\n\n    function successUsers() {\n      var type = vm.showEnabled ? ' ' : ' disabled ';\n      $log.info('Loaded' + type + 'users');\n    }\n\n    function getDisabledUsers() {\n      return UserData.getDisabledUsers()\n        .then(assignUsers(disabledUsers));\n    }\n\n    /////////////////////////////////\n    // ngClick functions\n    // /////////////////////////////\n    function switchUsers() {\n      vm.showEnabled = !vm.showEnabled;\n      return vm.showEnabled\n        ? getUsers().then(successUsers)\n        : getDisabledUsers().then(successUsers);\n    }\n\n    function addOrDeleteAll(ev) {\n      if (vm.showEnabled) {\n        showAdd(ev, vm.users);\n      } else {\n        vm.showConfirm(ev, 0, 'delAll', { name: '' }, vm.users);\n      }\n    }\n\n    function changeRole(user) {\n      var privilege = user.privilege == 'A' ? 'M' : 'A';\n      UserData.updateRole(user.id, privilege)\n        .then(function() {\n          user.privilege = privilege;\n        });\n    }\n\n    /////////////////////////////////\n    // DOM manipulation\n    // /////////////////////////////\n    function focusSearch() {\n      searchField.focus();\n    }\n\n    /////////////////////////////////\n    // Classes and Texts\n    // /////////////////////////////\n    function roleClass(privilege) {\n      return privilege == 'A'\n        ? 'md-warn'\n        : 'md-accent md-hue-3';\n    }\n\n    function resetText(user) {\n      if (user.disabled) return 'enable';\n      if (user.active) return 'reset';\n      return 'inactive';\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('UserDialog', UserDialog);\n\n  /** @ngInject */\n  function UserDialog(\n    $mdDialog,\n    UserData,\n    $document,\n    $mdToast\n  ) {\n    var doc = $document[0];\n\n    var service = {\n      showConfirm: showConfirm,\n      showAdd: showAdd\n    };\n\n    return service;\n\n    function showConfirm(ev, idx, type, user, users) {\n      var dialog = {\n        del: {\n          text: ' delete ',\n          content: 'If the user has associated records, user will be disabled instead. Switch to disabled users view to perform hard delete.',\n          ariaLabel: 'Confirm delete',\n          ok: 'Delete',\n          confirmAction: function confirmDelete() {\n            UserData.deleteUser(user.id).then(function(data) {\n              users.splice(idx, 1);\n              confirmToast(data.message + ': ' + user.name);\n            });\n          }\n        },\n        delAll: {\n          text: ' DELETE ALL ',\n          content: 'Delete all disabled users. Are you sure?',\n          ariaLabel: 'Confirm delete all',\n          ok: 'Delete All',\n          confirmAction: function confirmDelAll() {\n            UserData.deleteAllDisabled().then(function(data) {\n              users.length = 0;\n              confirmToast(data.message + ': ' + data.affected);\n            });\n          }\n        },\n        reset: {\n          text: ' reset ',\n          content: 'Deactivate user and reset password. Once reset, user need to go through sign up process same as new user',\n          ariaLabel: 'Confirm reset',\n          ok: 'Reset',\n          confirmAction: function confirmReset() {\n            UserData.resetUser(user.id).then(function() {\n              user.active = false;\n              confirmToast('Reset ' + user.name);\n            });\n          }\n        },\n        enable: {\n          text: ' enable ',\n          content: 'Will restore user to original state (active or inactive)',\n          ariaLabel: 'Confirm enable',\n          ok: 'Enable',\n          confirmAction: function confirmEnable() {\n            UserData.enableUser(user.id).then(function() {\n              users.splice(idx, 1);\n              confirmToast('Enabled ' + user.name);\n            });\n          }\n        }\n      };\n\n      function confirmTitle() {\n        return 'Confirm to' + dialog[type].text + user.name;\n      }\n\n      var confirm = $mdDialog.confirm()\n        .title(confirmTitle())\n        .textContent(dialog[type].content)\n        .ariaLabel(dialog[type].ariaLabel)\n        .targetEvent(ev)\n        .ok(dialog[type].ok)\n        .cancel('Cancel');\n\n      $mdDialog\n        .show(confirm)\n        .then(dialog[type].confirmAction);\n    } // showConfirm\n\n    function confirmToast(message) {\n      return $mdToast.show(\n        $mdToast.simple()\n        .textContent(message)\n        .position('bottom right')\n        .hideDelay(2000)\n      );\n    }\n\n    function showAdd(ev, users) {\n      $mdDialog.show({\n        controller: AddDialogController,\n        templateUrl: 'app/users/add.dialog.html',\n        parent: angular.element(doc.body),\n        targetEvent: ev,\n        clickOutsideToClose: true\n      });\n\n      function AddDialogController($scope, $mdDialog) {\n        $scope.privilege = 'M';\n\n        $scope.cancel = function() {\n          $mdDialog.cancel();\n        };\n\n        $scope.add = function() {\n          UserData.createUser({\n            email: $scope.email,\n            name: $scope.name,\n            privilege: $scope.privilege\n          }).then(function(data) {\n            var user = data.user;\n            users.push(user);\n            confirmToast('Added user: ' + user.name);\n            $mdDialog.hide();\n          });\n        };\n      }\n    } // showAdd\n\n  } // UserDialog Service\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('UserData', UserData);\n\n  /** @ngInject */\n  function UserData(\n    url,\n    $q,\n    $log,\n    $http\n  ) {\n\n    var service = {\n      getUsers: getUsers,\n      getDisabledUsers: getDisabledUsers,\n      createUser: createUser,\n      resetUser: resetUser,\n      updateRole: updateRole,\n      enableUser: enableUser,\n      deleteUser: deleteUser,\n      deleteAllDisabled: deleteAllDisabled\n    };\n\n    return service;\n\n    /////////////////////////////////\n    // GET\n    // /////////////////////////////\n    function getUsers() {\n      return $http.get(url('/users'))\n        .then(getUsersComplete)\n        .catch(catchErrorFn('XHR getUsers failed'));\n    }\n\n    function getDisabledUsers() {\n      return $http.get(url('/users?disabled=1'))\n        .then(getUsersComplete)\n        .catch(catchErrorFn('XHR getDisabledUsers failed'));\n    }\n\n    /////////////////////////////////\n    // Promise Fulfilled / Rejected\n    // /////////////////////////////\n    function getUsersComplete(data) {\n      var users = data.data.users;\n      return users;\n    }\n\n    function actionComplete(data) {\n      return data.data;\n    }\n\n    function catchErrorFn(errMsg) {\n\n      return function requestFailed(e) {\n        var newMessage = errMsg;\n        if (e.data && e.data.description) {\n          newMessage += '\\n' + e.data.description;\n        }\n        if (e.data) {\n          e.data.description = newMessage;\n        }\n        $log.error(e.data);\n        return $q.reject(e);\n      };\n    }\n\n    /////////////////////////////////\n    // POST\n    // /////////////////////////////\n    function createUser(user) {\n      return $http.post(url('/users'), user)\n        .then(actionComplete)\n        .catch(catchErrorFn('XHR createUser failed'));\n    }\n\n    /////////////////////////////////\n    // PUT\n    // /////////////////////////////\n    function resetUser(id) {\n      return $http.put(url('/user', id), {\n        password: 'null',\n        active: 'No'\n      }).then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('resetUser', id)));\n    }\n\n    function updateRole(id, privilege) {\n      return $http.put(url('/user', id), {\n        privilege: privilege\n      }).then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('updateRole', id)));\n    }\n\n    function enableUser(id) {\n      return $http.put(url('/user', id), {\n        disabled: 'false'\n      }).then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('enableUser', id)));\n    }\n\n    /////////////////////////////////\n    // DELETE\n    // /////////////////////////////\n    function deleteUser(id) {\n      return $http.delete(url('/user', id))\n        .then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('deleteUser', id)));\n    }\n\n    function deleteAllDisabled() {\n      return $http.delete(url('/users'))\n        .then(actionComplete)\n        .catch(catchErrorFn('XHR deleteAllDisabled failed'));\n    }\n\n    /////////////////////////////////\n    // Helpers\n    // /////////////////////////////\n    function actionErrMsg(name, id) {\n      return 'XHR ' + name + ' by ' + id + ' failed';\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('MapInit', MapInit);\n\n  /** @ngInject */\n  function MapInit(\n    $window,\n    ApiKey,\n    $log,\n    $q\n  ) {\n    var doc = $window.document;\n    var asyncUrl = 'https://maps.googleapis.com/maps/api/js?key=';\n    asyncUrl += ApiKey + '&libraries=places&callback=';\n    var mapsDefer = $q.defer();\n\n    $window.GMapInitialized = mapsDefer.resolve;\n\n    function asyncLoad(asyncUrl, cbName) {\n      $log.log('adding script tag');\n      var script = doc.createElement('script');\n      script.src = asyncUrl + cbName;\n      doc.body.appendChild(script);\n    }\n    asyncLoad(asyncUrl, 'GMapInitialized');\n\n    var service = {\n      initialized: mapsDefer.promise\n    };\n\n    return service;\n\n  } // MapInit\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('MapDialog', MapDialog);\n\n  /** @ngInject */\n  function MapDialog(\n    byId,\n    MapData,\n    mapIcons,\n    $document,\n    $log,\n    $mdDialog,\n    $mdToast,\n    $rootScope,\n    $timeout,\n    $window\n  ) {\n    var nav = $window.navigator;\n\n    var service = {\n      createInfoContent: createInfoContent,\n      initMarkerDialog: initMarkerDialog,\n      confirmDelete: confirmDelete\n    };\n\n    return service;\n\n    function createInfoContent(record) {\n      var address = '<h4>' + record.Location.address + '</h4>';\n      var severity = '<p>Severity: ' + record.severity + '</p>';\n      var description = '<p>' + record.description + '</p>';\n      var divider = '<md-divider></md-divider>';\n      var editBtn = '<button class=\"md-primary md-button\" type=\"button\"' +\n        ' aria-label=\"Edit\" id=\"edit-record-btn\">Edit</button>';\n      var delBtn = '<button class=\"md-primary md-button\" type=\"button\"' +\n        ' aria-label=\"Delete\" id=\"del-record-btn\">Delete</button>';\n      var content = address + severity + description +\n                    divider + editBtn + delBtn;\n      return content;\n    }\n\n    function initMarkerDialog(\n      types,\n      Gmap,\n      neatMap,\n      magicMarker\n    ) {\n\n      return function showDialog(ev, marker, infowindow) {\n        $mdDialog.show({\n          controller: DialogController,\n          templateUrl: 'app/map/marker.dialog.html',\n          parent: angular.element($document[0].body),\n          targetEvent: ev,\n          clickOutsideToClose: true\n        });\n\n        function DialogController($scope, $mdDialog) {\n          var vm = $scope;\n          var record;\n          var isUpdate = marker ? true : false;\n          $timeout(addPlaceSearch);\n\n          vm.types = types;\n          vm.severity = 3;\n          vm.cancel = cancel;\n          vm.confirm = confirm;\n          vm.locateCurrent = locateCurrent;\n          if (isUpdate) {\n            record = marker.myRecord;\n            vm.lat = record.Location.latitude;\n            vm.long = record.Location.longitude;\n            vm.address = record.Location.address;\n            vm.description = record.description;\n            vm.severity = record.severity;\n            vm.typeId = record.TypeId;\n          }\n\n          function addPlaceSearch() {\n            var input = byId('address');\n            var searchBox = new Gmap.places.SearchBox(input);\n\n            neatMap.addListener('bounds_changed', function() {\n              searchBox.setBounds(neatMap.getBounds());\n            });\n\n            searchBox.addListener('places_changed', function() {\n              var places = searchBox.getPlaces();\n              if (places.length === 0) return;\n              var place = places[0];\n              vm.address = place.name;\n              vm.long = place.geometry.location.lng();\n              vm.lat = place.geometry.location.lat();\n            });\n          }\n\n          function cancel() {\n            $mdDialog.cancel();\n          }\n\n          function confirm() {\n            var recordVals = {\n              long: vm.long,\n              lat: vm.lat,\n              address: vm.address,\n              description: vm.description,\n              severity: vm.severity,\n              user_id: $rootScope.user.id,\n              type_id: vm.typeId\n            };\n\n            if (isUpdate) {\n              update(recordVals);\n            } else {\n              add(recordVals);\n            }\n            $mdDialog.hide();\n          }\n\n          function add(recordVals) {\n            MapData.createRecord(recordVals)\n              .then(function(data) {\n                var newRecord = data.record;\n                newRecord.Location = {\n                  address: vm.address,\n                  latitude: vm.lat,\n                  longitude: vm.long\n                };\n                magicMarker(vm.lat, vm.long, newRecord, true);\n              });\n          }\n\n          function update(recordVals) {\n            MapData.updateRecord(record.id, recordVals)\n              .then(function(data) {\n                // closes infowindow\n                infowindow.close();\n                var newRecord = data.affected[1][0];\n                newRecord.Location = {\n                  address: vm.address,\n                  latitude: vm.lat,\n                  longitude: vm.long\n                };\n                marker.myRecord = newRecord;\n                marker.setIcon(mapIcons(\n                  types[newRecord.TypeId],\n                  newRecord.severity,\n                  Gmap\n                ));\n                marker.setPosition({\n                  lat: vm.lat,\n                  lng: vm.long\n                });\n              });\n          }\n\n          function locateCurrent() {\n            vm.address = 'Locating...';\n            vm.locating = true;\n            if (nav.geolocation) {\n              nav.geolocation.getCurrentPosition(function(pos) {\n                vm.lat = pos.coords.latitude;\n                vm.long = pos.coords.longitude;\n                var geocoder = new Gmap.Geocoder;\n                geocoder.geocode({\n                  location: { lat: vm.lat, lng: vm.long }\n                }, function(results, status) {\n                  vm.locating = false;\n                  if (status === Gmap.GeocoderStatus.OK) {\n                    if (results[1]) {\n                      vm.address = results[1].formatted_address;\n                      vm.$apply();\n                    } else {\n                      $window.alert('No results found');\n                    }\n                  } else {\n                    $window.alert('Geocoder failed due to: ' + status);\n                  }\n                });\n              });\n            } else {\n              $log.error('Browser does not support goelocation');\n            }\n          }\n\n        } // dialogCtrl\n      }; // showDialog\n\n    } // initMarkerDialog\n\n    function confirmDelete(ev, marker, markers) {\n      var record = marker.myRecord;\n      var address = record.Location.address;\n      var text =\n        'Inreversible. Are you sure you want to delete: ' + address + '?';\n      var confirm = $mdDialog.confirm()\n        .title('Confirm to delete')\n        .textContent(text)\n        .ariaLabel('Confirm delete')\n        .targetEvent(ev)\n        .ok('Delete')\n        .cancel('Cancel');\n\n      $mdDialog\n      .show(confirm)\n      .then(performDelete);\n\n      function performDelete() {\n        MapData.deleteRecord(marker.myRecord.id)\n          .then(deleteUIcleanUp);\n      }\n\n      function deleteUIcleanUp(data) {\n        marker.setMap(null);\n        markers.splice(markers.indexOf(marker), 1);\n        $log.info(data);\n      }\n    } // confirmDelete\n\n\n  } // MapDialog Service\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('MapData', MapData);\n\n  /** @ngInject */\n  function MapData(\n    url,\n    $q,\n    $log,\n    $http\n  ) {\n\n    var service = {\n      getTypes: getTypes,\n      getRecords: getRecords,\n      createRecord: createRecord,\n      updateRecord: updateRecord,\n      deleteRecord: deleteRecord\n    };\n\n    return service;\n\n    /////////////////////////////////\n    // GET\n    // /////////////////////////////\n    function getTypes() {\n      return $http.get(url('/types'))\n        .then(getDataComplete('types'))\n        .catch(catchErrorFn('XHR getTypes failed'));\n    }\n\n    function getRecords() {\n      return $http.get(url('/records'))\n        .then(getDataComplete('records'))\n        .catch(catchErrorFn('XHR getRecords failed'));\n    }\n\n    /////////////////////////////////\n    // Promise Fulfilled / Rejected\n    // /////////////////////////////\n    function getDataComplete(type) {\n      return function complete(data) {\n        return data.data[type];\n      };\n    }\n\n    function actionComplete(data) {\n      return data.data;\n    }\n\n    function catchErrorFn(errMsg) {\n\n      return function requestFailed(e) {\n        var newMessage = errMsg;\n        if (e.data && e.data.description) {\n          newMessage += '\\n' + e.data.description;\n        }\n        if (e.data) {\n          e.data.description = newMessage;\n        }\n        $log.error(e.data);\n        return $q.reject(e);\n      };\n    }\n\n    /////////////////////////////////\n    // POST\n    // /////////////////////////////\n    function createRecord(record) {\n      return $http.post(url('/records'), record)\n        .then(actionComplete)\n        .catch(catchErrorFn('XHR createRecord failed'));\n    }\n\n    /////////////////////////////////\n    // PUT\n    // /////////////////////////////\n    function updateRecord(id, record) {\n      return $http.put(url('/record', id), record)\n        .then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('updateRecord', id)));\n    }\n\n    /////////////////////////////////\n    // DELETE\n    // /////////////////////////////\n    function deleteRecord(id) {\n      return $http.delete(url('/record', id))\n        .then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('deleteRecord', id)));\n    }\n\n    /////////////////////////////////\n    // Helpers\n    // /////////////////////////////\n    function actionErrMsg(name, id) {\n      return 'XHR ' + name + ' by ' + id + ' failed';\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('MapController', MapController);\n\n  /** @ngInject */\n  function MapController(\n    byId,\n    MapData,\n    MapDialog,\n    mapIcons,\n    MapInit,\n    $mdDialog,\n    $window\n  ) {\n    var vm = this;\n    var markers = [];\n    // var records = [];\n    var Gmap;\n    var neatMap;\n    var mapEl;\n\n    activate();\n\n    function activate() {\n      mapEl = byId('map');\n      MapInit.initialized\n      .then(setupMap)\n      .then(setupControls);\n    }\n\n    /////////////////////////////////\n    // Google Map Setup\n    // /////////////////////////////\n    function setupMap() {\n      Gmap = $window.google.maps;\n      neatMap = new Gmap.Map(mapEl, {\n        center: {lat: 44.4120908, lng: -79.6701331},\n        zoom: 15\n      });\n\n      return getTypes()\n        .then(getRecords)\n        .then(assignRecordsToMarkers);\n    }\n\n    /*\n     * Map helpers\n     */\n    function assignRecordsToMarkers(records) {\n      records.forEach(function(record) {\n        var local  = record.Location;\n        magicMarker(local.latitude, local.longitude, record);\n      });\n      return records;\n    }\n\n    function magicMarker(lat, lng, record, animate) {\n      var options = {\n        position: { lat: lat, lng: lng },\n        icon: mapIcons(vm.types[record.TypeId], record.severity, Gmap),\n        map: neatMap,\n        myRecord: record\n      };\n\n      if (animate) {\n        options.animation = Gmap.Animation.DROP;\n      }\n\n      var marker = new Gmap.Marker(options);\n      attachMarkerEvent(marker);\n      // records.push(record);\n      markers.push(marker);\n\n      return marker;\n    }\n\n    function attachMarkerEvent(marker) {\n      marker.addListener('click', function() {\n        var self = this;\n\n        // on click create a new info window with record content\n        var infowindow = new Gmap.InfoWindow({\n          content: MapDialog.createInfoContent(self.myRecord)\n        });\n\n        // add click listener to info window buttons\n        infowindow.addListener('domready', function() {\n          var editBtn = byId('edit-record-btn');\n          var delBtn = byId('del-record-btn');\n\n          editBtn.addEventListener('click', function(ev) {\n            vm.showDialog(ev, self, infowindow);\n          });\n\n          delBtn.addEventListener('click', function(ev) {\n            MapDialog.confirmDelete(ev, self, markers);\n          });\n        });\n\n        infowindow.open(neatMap, self);\n      });\n    }\n\n    /////////////////////////////////\n    // GET\n    // /////////////////////////////\n    function getTypes() {\n      return MapData.getTypes()\n      .then(function(data) {\n        vm.types = data.reduce(typeArrayToMap, {});\n        return vm.types;\n      });\n\n      function typeArrayToMap(prev, curr) {\n        prev[curr.id] = curr.name.replace(' ', '-');\n        return prev;\n      }\n    }\n\n    function getRecords() {\n      return MapData.getRecords()\n        .then(function(data) {\n          // records = data;\n          return data;\n        });\n    }\n\n    /////////////////////////////////\n    // Dialog setup\n    // /////////////////////////////\n    function setupControls() {\n      vm.showDialog = MapDialog.initMarkerDialog(\n        vm.types,\n        Gmap,\n        neatMap,\n        magicMarker\n      );\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('LoginController', LoginController);\n\n  /** @ngInject */\n  function LoginController(\n    $state,\n    $log,\n    AuthService\n  ) {\n    var vm = this;\n\n    vm.login = login;\n    vm.enter = enter;\n\n    // TODO: if form invalid, disable function\n    function login() {\n      AuthService.login(vm.email, vm.password)\n        .then(function() {\n          AuthService.getMe().then(function() {\n            $state.go('map');\n          });\n        });\n    }\n\n    function enter(ev) {\n      if (ev.charCode !== 13) return;\n      return login();\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('NavController', NavController);\n\n  /** @ngInject */\n  function NavController(\n    $state,\n    AuthService\n  ) {\n    var vm = this;\n\n    vm.logout = logout;\n\n    activate();\n\n    function activate() {\n    }\n\n    function logout() {\n      AuthService.logout();\n      $state.go('login');\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('AuthToken', AuthToken);\n\n  /** @ngInject */\n  function AuthToken(\n    $window\n  ) {\n\n    var service = {\n      getToken: getToken,\n      setToken: setToken\n    };\n\n    return service;\n\n    function getToken() {\n      return $window.localStorage.getItem('token');\n    }\n\n    function setToken(token) {\n      if (token) {\n        $window.localStorage.setItem('token', token);\n      } else {\n        $window.localStorage.removeItem('token');\n      }\n    }\n\n  } // AuthToken\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('AuthService', AuthService);\n\n  /** @ngInject */\n  function AuthService(\n    AuthToken,\n    $http,\n    $q,\n    $log,\n    $rootScope,\n    url\n  ) {\n\n    var service = {\n      login: login,\n      logout: logout,\n      isLoggedIn: isLoggedIn,\n      isAdmin: isAdmin,\n      isSelf: isSelf,\n      getMe: getMe\n    };\n\n    return service;\n\n    function login(email, password) {\n      return $http.post(url('/authenticate'), {\n        email: email,\n        password: password\n      }).then(authSuccess)\n        .catch(authFailed);\n\n      function authSuccess(data) {\n        AuthToken.setToken(data.data.token);\n        return data.data;\n      }\n\n      function authFailed(e) {\n        AuthToken.setToken();\n        $log.error(e.data);\n        return $q.reject(e);\n      }\n    }\n\n    function logout() {\n      AuthToken.setToken();\n      $rootScope.user = {};\n    }\n\n    function isLoggedIn() {\n      return AuthToken.getToken() ? true : false;\n    }\n\n    function isAdmin() {\n      return Boolean($rootScope.user) && $rootScope.user.privilege == 'A';\n    }\n\n    function isSelf(id) {\n      return $rootScope.user && $rootScope.user.id == id;\n    }\n\n    function getMe() {\n      return $http.get(url('/me'))\n        .then(getMeComplete)\n        .catch(getMeFailed);\n\n      function getMeComplete(data) {\n        var me = data.data.user;\n        $rootScope.user = me;\n        $log.info('Added me');\n        return me;\n      }\n\n      function getMeFailed(e) {\n        $log.error(e.data);\n        return $q.reject(e);\n      }\n    }\n\n  } // AuthService\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('AuthInterceptor', AuthInterceptor);\n\n  /** @ngInject */\n  function AuthInterceptor(\n    $q,\n    AuthToken\n  ) {\n\n    var service = {\n      request: request,\n      responseError: responseError\n    };\n\n    return service;\n\n    function request(config) {\n      var token = AuthToken.getToken();\n      if (token) {\n        config.headers.Authorization = 'Bearer ' + token;\n      }\n      return config;\n    }\n\n    function responseError(res) {\n      if (res.status == 403) {\n        AuthToken.setToken();\n      }\n      return $q.reject(res);\n    }\n\n  } // AuthInterceptor\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock(\n    $log,\n    $rootScope,\n    $state,\n    AuthService\n  ) {\n\n    $rootScope.$on('$stateChangeStart', watchAuth);\n\n    function watchAuth(e, toState) {\n      if (toState.name === 'login') {\n        return;\n      }\n      if (AuthService.isLoggedIn()) {\n        if (!$rootScope.user || !$rootScope.user.privilege) {\n          AuthService.getMe().then(function() {\n            $log.info('Readded me');\n          });\n        }\n      } else {\n        e.preventDefault();\n        $state.go('login');\n      }\n    }\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig(\n    $stateProvider,\n    $locationProvider,\n    $urlRouterProvider\n  ) {\n    var navView = {\n      templateUrl: 'app/layout/nav.html',\n      controller: 'NavController',\n      controllerAs: 'nv'\n    };\n\n    $stateProvider\n      .state('map', {\n        url: '/',\n        views: {\n          nav: navView,\n          content: {\n            templateUrl: 'app/map/map.html',\n            controller: 'MapController',\n            controllerAs: 'mp'\n          }\n        }\n      })\n      .state('users', {\n        url: '/users',\n        views: {\n          nav: navView,\n          content: {\n            templateUrl: 'app/users/users.html',\n            controller: 'UsersController',\n            controllerAs: 'us'\n          }\n        }\n      })\n      .state('login', {\n        url: '/login',\n        views: {\n          content: {\n            templateUrl: 'app/login/login.html',\n            controller: 'LoginController',\n            controllerAs: 'lg'\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/');\n    $locationProvider.html5Mode(true);\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .constant('ApiKey', 'AIzaSyC_I1rGTiTnBiYQmCFou6xYWzC1rR3QetM')\n    .constant('mapIcons', mapIcons)\n    .constant('byId', byId)\n    .constant('url', url);\n\n  function mapIcons(type, level, Gmap) {\n    type = type.toLowerCase();\n    var levels = {\n      1: '-green',\n      2: '-yellow',\n      3: '-yellow',\n      4: '-red',\n      5: '-red'\n    };\n    var url = '../assets/images/' + type + levels[level] + '.svg';\n    return {\n      url: url,\n      anchor: new Gmap.Point(28, 28)\n    };\n  }\n\n  function byId(id) {\n    return document.getElementById(id);\n  }\n\n  function url(path, id) {\n    var baseUrl = 'http://neatmap.xyz/api';\n    path = baseUrl + path;\n    if (id) path += '/' + id;\n    return path;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .config(config);\n\n  /** @ngInject */\n  function config(\n    $logProvider,\n    $httpProvider,\n    $mdThemingProvider,\n    $mdIconProvider\n  ) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    $httpProvider.interceptors.push('AuthInterceptor');\n\n    // Custom themes\n    var neatGrey = $mdThemingProvider.extendPalette('blue-grey', {\n      '900': '#1f2532'\n    });\n    var neatRed = $mdThemingProvider.extendPalette('red', {\n      '400': '#ff5252'\n    });\n\n    $mdThemingProvider\n      .definePalette('neatGrey', neatGrey)\n      .definePalette('neatRed', neatRed)\n      .theme('default')\n      .primaryPalette('neatRed', {\n        'default': '400'\n      })\n      .accentPalette('neatGrey', {\n        'default': '900',\n        'hue-2': '500'\n      })\n      .warnPalette('orange');\n\n    // Register icons\n    $mdIconProvider\n      .icon('logo-header', '/assets/images/logo-header.svg')\n      .icon('logo-login', '/assets/images/logo-login.svg');\n  }\n\n})();\n\nangular.module(\"neatClient\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/layout/nav.html\",\"<md-toolbar layout=\\\"row\\\" class=\\\"md-accent md-whiteframe-4dp pos-fixed\\\"><md-button flex=\\\"20\\\" aria-label=\\\"App Logo, Go to Home\\\"><a ui-sref=\\\"map\\\"><md-icon md-svg-icon=\\\"logo-header\\\" class=\\\"head-logo\\\"></md-icon></a></md-button><nav flex=\\\"60\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><a class=\\\"nav-link\\\" ui-sref=\\\"map\\\" ui-sref-active=\\\"nav-link--active\\\" md-ink-ripple=\\\"\\\">Map</a> <a class=\\\"nav-link\\\" ui-sref=\\\"users\\\" ui-sref-active=\\\"nav-link--active\\\" md-ink-ripple=\\\"\\\">Users</a></nav><span flex=\\\"20\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><md-button class=\\\"btn-logout\\\" ng-click=\\\"nv.logout()\\\">Logout</md-button></span></md-toolbar>\");\n$templateCache.put(\"app/login/login.html\",\"<md-content class=\\\"dark-bg\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\" layout-fill=\\\"\\\"><md-card flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" class=\\\"login-box md-whiteframe-6dp\\\"><div style=\\\"height:140px\\\"><md-icon md-svg-icon=\\\"logo-login\\\" class=\\\"login-logo\\\"></md-icon></div><form name=\\\"loginForm\\\" class=\\\"login-form\\\"><div layout=\\\"column\\\"><md-input-container><label>Email</label> <input name=\\\"email\\\" type=\\\"email\\\" required=\\\"\\\" ng-pattern=\\\"/^.+@.+\\\\..+$/\\\" ng-model=\\\"lg.email\\\"><div ng-messages=\\\"loginForm.email.$error\\\"><div ng-message=\\\"required\\\">Email Required</div><div ng-message=\\\"pattern\\\">Invalid Email</div></div></md-input-container><md-input-container><label>Password</label> <input type=\\\"password\\\" name=\\\"password\\\" ng-keypress=\\\"lg.enter($event)\\\" required=\\\"\\\" ng-model=\\\"lg.password\\\"><div ng-messages=\\\"loginForm.password.$error\\\"><div ng-message=\\\"required\\\">Password required</div></div></md-input-container></div></form><md-card-actions layout=\\\"column\\\"><md-button class=\\\"login-btn md-raised md-primary\\\" ng-click=\\\"lg.login()\\\">Login</md-button></md-card-actions></md-card></md-content>\");\n$templateCache.put(\"app/map/map.html\",\"<md-button class=\\\"md-fab md-primary md-fab--lg md-fab--add pos-fixed\\\" ng-click=\\\"mp.showDialog($event)\\\" aria-label=\\\"Add user\\\"><i class=\\\"material-icons mi--mid\\\">add_location</i></md-button><div layout=\\\"row\\\" id=\\\"map\\\" layout-fill=\\\"\\\"></div>\");\n$templateCache.put(\"app/map/marker.dialog.html\",\"<md-dialog aria-label=\\\"Add Marker\\\" flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" layout-padding=\\\"\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><h3 class=\\\"md-headline\\\">Add Marker</h3><form name=\\\"markerForm\\\"><div layout=\\\"column\\\"><div layout=\\\"row\\\" layout-align=\\\"center center\\\"><md-input-container md-no-float=\\\"\\\" flex=\\\"90\\\"><input name=\\\"address\\\" id=\\\"address\\\" type=\\\"text\\\" placeholder=\\\"Location\\\" ng-model=\\\"address\\\"></md-input-container><span ng-if=\\\"locating\\\" flex=\\\"10\\\"><md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"20\\\"></md-progress-circular></span> <span ng-if=\\\"!locating\\\" flex=\\\"10\\\"><md-button class=\\\"md-icon-button md-primary\\\" ng-click=\\\"locateCurrent()\\\" aria-label=\\\"current location\\\"><i class=\\\"material-icons\\\">my_location</i></md-button></span></div><md-input-container><label>Type</label><md-select ng-model=\\\"typeId\\\"><md-option ng-repeat=\\\"(key, type) in types\\\" value=\\\"{{key}}\\\">{{type}}</md-option></md-select></md-input-container><md-input-container><label>Description</label> <textarea ng-model=\\\"description\\\" md-maxlength=\\\"240\\\" row=\\\"3\\\"></textarea></md-input-container><h4 class=\\\"md-subhead\\\">Severity</h4><md-slider class=\\\"md-primary\\\" ng-model=\\\"severity\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"5\\\" aria-label=\\\"severity\\\" md-discrete=\\\"\\\"></md-slider></div></form></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"cancel()\\\" class=\\\"md-primary\\\">Cancel</md-button><md-button ng-click=\\\"confirm()\\\" class=\\\"md-primary\\\">Save</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/users/add.dialog.html\",\"<md-dialog aria-label=\\\"Add User\\\" flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" layout-padding=\\\"\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><h3 class=\\\"md-headline\\\">Add User</h3><form name=\\\"userForm\\\"><div layout=\\\"column\\\"><md-input-container class=\\\"user-form-input\\\"><label>Email</label> <input type=\\\"email\\\" name=\\\"email\\\" required=\\\"\\\" ng-pattern=\\\"/^.+@.+\\\\..+$/\\\" ng-model=\\\"email\\\"><div ng-messages=\\\"userForm.email.$error\\\"><div ng-message=\\\"required\\\">Email Required</div><div ng-message=\\\"pattern\\\">Invalid Email</div></div></md-input-container><md-input-container class=\\\"user-form-input\\\"><label>Name</label> <input ng-model=\\\"name\\\"></md-input-container><h4 class=\\\"md-subhead\\\">User Role</h4><md-radio-group ng-model=\\\"privilege\\\"><md-radio-button value=\\\"M\\\" class=\\\"md-primary btn-role\\\">Member</md-radio-button><md-radio-button value=\\\"A\\\" class=\\\"md-primary btn-role\\\">Admin</md-radio-button></md-radio-group></div></form></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"cancel()\\\" class=\\\"md-primary\\\">Cancel</md-button><md-button ng-click=\\\"add()\\\" class=\\\"md-primary\\\">Save</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/users/users.html\",\"<div class=\\\"light-bg nav-padding\\\" layout=\\\"column\\\" layout-fill=\\\"\\\"><div layout=\\\"row\\\" layout-align=\\\"center start\\\"><md-content class=\\\"light-bg user-content\\\" flex=\\\"50\\\" flex-lg=\\\"60\\\" flex-md=\\\"70\\\" flex-sm=\\\"90\\\" flex-xs=\\\"100\\\"><md-subheader class=\\\"user-subheader\\\"><md-menu><md-button class=\\\"md-btn--shrink\\\" ng-disabled=\\\"!us.isAdmin()\\\" ng-click=\\\"$mdOpenMenu($event)\\\">{{ us.showEnabled ? \\'Enabled Users\\' : \\'Disabled Users\\' }} <i class=\\\"material-icons mi--mid\\\">expand_more</i></md-button><md-menu-content><md-menu-item><md-button ng-disabled=\\\"true\\\">{{ us.showEnabled ? \\'Enabled Users\\' : \\'Disabled Users\\' }}</md-button></md-menu-item><md-menu-item><md-button ng-click=\\\"us.switchUsers()\\\">{{ !us.showEnabled ? \\'Enabled Users\\' : \\'Disabled Users\\' }}</md-button></md-menu-item></md-menu-content></md-menu><md-input-container class=\\\"user-search\\\" md-no-float=\\\"\\\"><input id=\\\"user-search\\\" type=\\\"text\\\" ng-model=\\\"us.search\\\" placeholder=\\\"Search\\\"></md-input-container></md-subheader><md-list><md-list-item class=\\\"md-2-line\\\" ng-repeat=\\\"user in us.users | filter:us.search\\\" ng-click=\\\"null\\\"><div class=\\\"md-list-item-text\\\" layout=\\\"column\\\"><h3>{{ user.name }}</h3><p>{{ user.email }}</p></div><md-menu class=\\\"md-secondary\\\" hide-md=\\\"\\\" hide-sm=\\\"\\\" hide-xs=\\\"\\\"><md-button ng-class=\\\"us.roleClass(user.privilege)\\\" ng-disabled=\\\"user.disabled || us.isSelf(user.id) || !us.isAdmin()\\\" ng-click=\\\"$mdOpenMenu($event)\\\">{{ user.privilege == \\'A\\' ? \\'Admin\\' : \\'Member\\' }} <i class=\\\"material-icons mi--mid\\\">arrow_drop_down</i></md-button><md-menu-content><md-menu-item><md-button ng-disabled=\\\"true\\\">{{ user.privilege == \\'A\\' ? \\'Admin\\' : \\'Member\\' }}</md-button></md-menu-item><md-menu-item><md-button ng-click=\\\"us.changeRole(user)\\\">{{ user.privilege != \\'A\\' ? \\'Admin\\' : \\'Member\\' }}</md-button></md-menu-item></md-menu-content></md-menu><md-button class=\\\"md-secondary md-primary\\\" ng-if=\\\"us.isAdmin()\\\" ng-disabled=\\\"us.isSelf(user.id) || !user.disabled && !user.active\\\" ng-click=\\\"us.showConfirm($event,$index,us.resetText(user),user,us.users)\\\" hide-xs=\\\"\\\">{{ us.resetText(user) }}</md-button><md-button class=\\\"md-secondary md-accent md-hue-1\\\" ng-disabled=\\\"us.isSelf(user.id) || !us.isAdmin()\\\" ng-click=\\\"us.showConfirm($event,$index,\\'del\\',user,us.users)\\\" aria-label=\\\"Delete user\\\"><i class=\\\"material-icons mi--mid\\\">{{ user.disabled ? \\'delete_forever\\' : \\'delete\\' }}</i></md-button><md-divider></md-divider></md-list-item></md-list></md-content></div><md-button class=\\\"md-fab md-fab--lg md-fab--search pos-fixed\\\" ng-click=\\\"us.focusSearch()\\\" aria-label=\\\"Search user\\\"><i class=\\\"material-icons mi--mid\\\">search</i></md-button><md-button class=\\\"md-fab md-primary md-fab--lg md-fab--add pos-fixed\\\" ng-if=\\\"us.isAdmin()\\\" ng-click=\\\"us.addOrDeleteAll($event)\\\" aria-label=\\\"Add user\\\"><i class=\\\"material-icons mi--mid\\\">{{ us.showEnabled ? \\'add\\' : \\'delete_sweep\\' }}</i></md-button></div>\");}]);"],"sourceRoot":"/source/"}