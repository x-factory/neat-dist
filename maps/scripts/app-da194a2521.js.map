{"version":3,"sources":["scripts/app-da194a2521.js"],"names":["angular","module","UsersController","UserData","$log","$document","AuthService","UserDialog","activate","getSearchField","searchField","doc","getElementById","element","ready","vm","showEnabled","getUsers","then","successUsers","assignUsers","users","data","type","info","getDisabledUsers","disabledUsers","switchUsers","addOrDeleteAll","ev","showAdd","showConfirm","name","changeRole","user","privilege","updateRole","id","focusSearch","focus","roleClass","resetText","disabled","active","btnDisabled","button","isSelf","isAdmin","isDisabled","this","$inject","controller","$mdDialog","$mdToast","idx","confirmTitle","dialog","text","del","content","ariaLabel","ok","confirmAction","deleteUser","splice","confirmToast","message","delAll","deleteAllDisabled","length","affected","reset","resetUser","enable","enableUser","confirm","title","textContent","targetEvent","cancel","show","simple","position","hideDelay","AddDialogController","$scope","add","createUser","email","push","hide","templateUrl","parent","body","clickOutsideToClose","service","factory","url","$q","$http","get","getUsersComplete","catchErrorFn","actionComplete","errMsg","e","newMessage","description","error","reject","post","put","password","actionErrMsg","AuthController","$state","login","isValid","loginForm","$valid","joinForm","getMe","go","err","showInvalidDialog","joinNeat","register","res","enter","join","charCode","MapInit","$window","ApiKey","asyncLoad","asyncUrl","cbName","log","script","createElement","src","appendChild","geocoder","Gmap","latLng","onceLocated","geocodeCb","results","status","GeocoderStatus","OK","alert","gc","Geocoder","geocode","location","document","mapsDefer","defer","GMapInitialized","resolve","initialized","promise","MapDialog","byId","MapData","mapIcons","$rootScope","$timeout","createInfoContent","record","address","Location","severity","divider","editBtn","delBtn","initMarkerDialog","types","neatMap","magicMarker","marker","infowindow","markers","DialogController","addPlaceSearch","input","searchBox","places","SearchBox","addListener","setBounds","getBounds","getPlaces","place","geometry","lng","lat","recordVals","long","user_id","me","type_id","typeId","isUpdate","isMapAdd","update","createRecord","close","confirmDelete","newRecord","latitude","longitude","updateRecord","myRecord","setIcon","TypeId","setPosition","locateCurrent","locating","nav","geolocation","getCurrentPosition","pos","autoFillAddress","result","formatted_address","$apply","coords","performDelete","deleteRecord","deleteUIcleanUp","setMap","indexOf","navigator","getTypes","getDataComplete","getRecords","getFilteredRecords","chosenTypes","queryStr","MapController","$mdSidenav","mapEl","setupMap","setupControls","getLocalMap","mapView","center","zoom","google","maps","Map","getCenter","getZoom","clickMapToAddListener","assignRecordsToMarkers","onClickAddMarker","addPlaceholder","resetTime","geo","setTimeout","records","forEach","local","animate","tbd","options","icon","map","animation","Animation","DROP","Marker","attachMarkerEvent","clearMarkers","self","InfoWindow","addEventListener","showDialog","open","typeArrayToMap","prev","curr","typeArrayToFilterModel","checked","reduce","filterTypes","$watch","now","clearing","applySeverity","toggleSideMenu","toggle","filterUpdate","toTypeIdArray","fSeverity","filterSeverity","filterClearAll","clearAllTypes","NavController","logout","argument","TitleController","watchTitle","toState","titles","$on","AuthToken","getToken","localStorage","getItem","setToken","token","setItem","removeItem","registrationComplete","registrationFailed","authSuccess","authFailed","isLoggedIn","Boolean","getMeComplete","getMeFailed","AuthInterceptor","request","config","headers","Authorization","responseError","runBlock","watchAuth","preventDefault","debug","run","routerConfig","$stateProvider","$locationProvider","$urlRouterProvider","navView","controllerAs","state","views","otherwise","html5Mode","level","toLowerCase","levels","1","2","3","4","5","replace","anchor","Point","path","baseUrl","constant","$logProvider","$httpProvider","$mdThemingProvider","$mdIconProvider","debugEnabled","interceptors","neatGrey","extendPalette","900","neatRed","400","definePalette","theme","primaryPalette","default","accentPalette","hue-2","warnPalette","$templateCache"],"mappings":"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","file":"scripts/app-da194a2521.js","sourcesContent":["(function() {\n  'use strict';\n\n  angular\n    .module('neatClient', [\n      'ngAnimate',\n      'ngCookies',\n      'ngSanitize',\n      'ngMessages',\n      'ngAria',\n      'ui.router',\n      'ngMaterial'\n    ]);\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('UsersController', UsersController);\n\n  /** @ngInject */\n  function UsersController(\n    UserData,\n    $log,\n    $document,\n    AuthService,\n    UserDialog\n  ) {\n    var vm = this;\n    var doc = $document[0];\n    var users;\n    var disabledUsers;\n    var searchField;\n    var showAdd = UserDialog.showAdd;\n\n    vm.isAdmin = AuthService.isAdmin;\n    vm.isSelf = AuthService.isSelf;\n    vm.switchUsers = switchUsers;\n    vm.showConfirm = UserDialog.showConfirm;\n    vm.addOrDeleteAll = addOrDeleteAll;\n    vm.changeRole = changeRole;\n    vm.focusSearch = focusSearch;\n    vm.roleClass = roleClass;\n    vm.resetText = resetText;\n    vm.btnDisabled = btnDisabled;\n\n    activate();\n\n    function activate() {\n      angular.element(doc).ready(getSearchField);\n      vm.showEnabled = true;\n      return getUsers().then(successUsers);\n      function getSearchField() {\n        searchField = doc.getElementById('user-search');\n      }\n    }\n\n    /////////////////////////////////\n    // GET users\n    // /////////////////////////////\n    function getUsers() {\n      return UserData.getUsers()\n        .then(assignUsers(users));\n    }\n\n    function assignUsers(users) {\n      return function(data) {\n        users = data;\n        vm.users = users;\n        return vm.users;\n      };\n    }\n\n    function successUsers() {\n      var type = vm.showEnabled ? ' ' : ' disabled ';\n      $log.info('Loaded' + type + 'users');\n    }\n\n    function getDisabledUsers() {\n      return UserData.getDisabledUsers()\n        .then(assignUsers(disabledUsers));\n    }\n\n    /////////////////////////////////\n    // ngClick functions\n    // /////////////////////////////\n    function switchUsers() {\n      vm.showEnabled = !vm.showEnabled;\n      return vm.showEnabled\n        ? getUsers().then(successUsers)\n        : getDisabledUsers().then(successUsers);\n    }\n\n    function addOrDeleteAll(ev) {\n      if (vm.showEnabled) {\n        showAdd(ev, vm.users);\n      } else {\n        vm.showConfirm(ev, 0, 'delAll', { name: '' }, vm.users);\n      }\n    }\n\n    function changeRole(user) {\n      var privilege = user.privilege == 'A' ? 'M' : 'A';\n      UserData.updateRole(user.id, privilege)\n        .then(function() {\n          user.privilege = privilege;\n        });\n    }\n\n    /////////////////////////////////\n    // DOM manipulation\n    // /////////////////////////////\n    function focusSearch() {\n      searchField.focus();\n    }\n\n    /////////////////////////////////\n    // Classes and Texts\n    // /////////////////////////////\n    function roleClass(privilege) {\n      return privilege == 'A'\n        ? 'md-warn'\n        : 'md-accent md-hue-3';\n    }\n\n    function resetText(user) {\n      if (user.disabled) return 'enable';\n      if (user.active) return 'reset';\n      return 'inactive';\n    }\n\n    function btnDisabled(user, button) {\n      var isSelf = AuthService.isSelf;\n      var isAdmin = AuthService.isAdmin;\n      var isDisabled = isSelf(user.id) || !isAdmin() || user.id < 2;\n      if (button == 'role') {\n        isDisabled = user.disabled || isDisabled;\n      } else if (button == 'reset') {\n        isDisabled = isDisabled || !user.disabled && !user.active;\n      }\n      return isDisabled;\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('UserDialog', UserDialog);\n\n  /** @ngInject */\n  function UserDialog(\n    $mdDialog,\n    UserData,\n    $document,\n    $mdToast\n  ) {\n    var doc = $document[0];\n\n    var service = {\n      showConfirm: showConfirm,\n      showAdd: showAdd\n    };\n\n    return service;\n\n    function showConfirm(ev, idx, type, user, users) {\n      var dialog = {\n        del: {\n          text: ' delete ',\n          content: 'If the user has associated records, user will be disabled instead. Switch to disabled users view to perform hard delete.',\n          ariaLabel: 'Confirm delete',\n          ok: 'Delete',\n          confirmAction: function confirmDelete() {\n            UserData.deleteUser(user.id).then(function(data) {\n              users.splice(idx, 1);\n              confirmToast(data.message + ': ' + user.name);\n            });\n          }\n        },\n        delAll: {\n          text: ' DELETE ALL ',\n          content: 'Delete all disabled users. Are you sure?',\n          ariaLabel: 'Confirm delete all',\n          ok: 'Delete All',\n          confirmAction: function confirmDelAll() {\n            UserData.deleteAllDisabled().then(function(data) {\n              users.length = 0;\n              confirmToast(data.message + ': ' + data.affected);\n            });\n          }\n        },\n        reset: {\n          text: ' reset ',\n          content: 'Deactivate user and reset password. Once reset, user need to go through sign up process same as new user',\n          ariaLabel: 'Confirm reset',\n          ok: 'Reset',\n          confirmAction: function confirmReset() {\n            UserData.resetUser(user.id).then(function() {\n              user.active = false;\n              confirmToast('Reset ' + user.name);\n            });\n          }\n        },\n        enable: {\n          text: ' enable ',\n          content: 'Will restore user to original state (active or inactive)',\n          ariaLabel: 'Confirm enable',\n          ok: 'Enable',\n          confirmAction: function confirmEnable() {\n            UserData.enableUser(user.id).then(function() {\n              users.splice(idx, 1);\n              confirmToast('Enabled ' + user.name);\n            });\n          }\n        }\n      };\n\n      function confirmTitle() {\n        return 'Confirm to' + dialog[type].text + user.name;\n      }\n\n      var confirm = $mdDialog.confirm()\n        .title(confirmTitle())\n        .textContent(dialog[type].content)\n        .ariaLabel(dialog[type].ariaLabel)\n        .targetEvent(ev)\n        .ok(dialog[type].ok)\n        .cancel('Cancel');\n\n      $mdDialog\n        .show(confirm)\n        .then(dialog[type].confirmAction);\n    } // showConfirm\n\n    function confirmToast(message) {\n      return $mdToast.show(\n        $mdToast.simple()\n        .textContent(message)\n        .position('bottom right')\n        .hideDelay(2000)\n      );\n    }\n\n    function showAdd(ev, users) {\n      $mdDialog.show({\n        controller: AddDialogController,\n        templateUrl: 'app/users/add.dialog.html',\n        parent: angular.element(doc.body),\n        targetEvent: ev,\n        clickOutsideToClose: true\n      });\n\n      function AddDialogController($scope, $mdDialog) {\n        $scope.privilege = 'M';\n\n        $scope.cancel = function() {\n          $mdDialog.cancel();\n        };\n\n        $scope.add = function() {\n          UserData.createUser({\n            email: $scope.email,\n            name: $scope.name,\n            privilege: $scope.privilege\n          }).then(function(data) {\n            var user = data.user;\n            users.push(user);\n            confirmToast('Added user: ' + user.name);\n            $mdDialog.hide();\n          });\n        };\n      }\n    } // showAdd\n\n  } // UserDialog Service\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('UserData', UserData);\n\n  /** @ngInject */\n  function UserData(\n    url,\n    $q,\n    $log,\n    $http\n  ) {\n\n    var service = {\n      getUsers: getUsers,\n      getDisabledUsers: getDisabledUsers,\n      createUser: createUser,\n      resetUser: resetUser,\n      updateRole: updateRole,\n      enableUser: enableUser,\n      deleteUser: deleteUser,\n      deleteAllDisabled: deleteAllDisabled\n    };\n\n    return service;\n\n    /////////////////////////////////\n    // GET\n    // /////////////////////////////\n    function getUsers() {\n      return $http.get(url('/users'))\n        .then(getUsersComplete)\n        .catch(catchErrorFn('XHR getUsers failed'));\n    }\n\n    function getDisabledUsers() {\n      return $http.get(url('/users?disabled=1'))\n        .then(getUsersComplete)\n        .catch(catchErrorFn('XHR getDisabledUsers failed'));\n    }\n\n    /////////////////////////////////\n    // Promise Fulfilled / Rejected\n    // /////////////////////////////\n    function getUsersComplete(data) {\n      var users = data.data.users;\n      return users;\n    }\n\n    function actionComplete(data) {\n      return data.data;\n    }\n\n    function catchErrorFn(errMsg) {\n\n      return function requestFailed(e) {\n        var newMessage = errMsg;\n        if (e.data && e.data.description) {\n          newMessage += '\\n' + e.data.description;\n        }\n        if (e.data) {\n          e.data.description = newMessage;\n        }\n        $log.error(e.data);\n        return $q.reject(e);\n      };\n    }\n\n    /////////////////////////////////\n    // POST\n    // /////////////////////////////\n    function createUser(user) {\n      return $http.post(url('/users'), user)\n        .then(actionComplete)\n        .catch(catchErrorFn('XHR createUser failed'));\n    }\n\n    /////////////////////////////////\n    // PUT\n    // /////////////////////////////\n    function resetUser(id) {\n      return $http.put(url('/user', id), {\n        password: 'null',\n        active: 'No'\n      }).then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('resetUser', id)));\n    }\n\n    function updateRole(id, privilege) {\n      return $http.put(url('/user', id), {\n        privilege: privilege\n      }).then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('updateRole', id)));\n    }\n\n    function enableUser(id) {\n      return $http.put(url('/user', id), {\n        disabled: 'false'\n      }).then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('enableUser', id)));\n    }\n\n    /////////////////////////////////\n    // DELETE\n    // /////////////////////////////\n    function deleteUser(id) {\n      return $http.delete(url('/user', id))\n        .then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('deleteUser', id)));\n    }\n\n    function deleteAllDisabled() {\n      return $http.delete(url('/users'))\n        .then(actionComplete)\n        .catch(catchErrorFn('XHR deleteAllDisabled failed'));\n    }\n\n    /////////////////////////////////\n    // Helpers\n    // /////////////////////////////\n    function actionErrMsg(name, id) {\n      return 'XHR ' + name + ' by ' + id + ' failed';\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('AuthController', AuthController);\n\n  /** @ngInject */\n  function AuthController(\n    AuthService,\n    $mdDialog,\n    $scope,\n    $state\n  ) {\n    var vm = this;\n\n    vm.login = login;\n    vm.join = joinNeat;\n    vm.enter = enter;\n\n    function login(ev) {\n      var isValid = $scope.loginForm\n        ? $scope.loginForm.$valid\n        : $scope.joinForm.$valid;\n\n      if (isValid) {\n        AuthService.login(vm.email, vm.password)\n          .then(function() {\n            AuthService.getMe().then(function() {\n              $state.go('map');\n            });\n          }).catch(function(err) {\n            showInvalidDialog(ev, err.message);\n          });\n      } else {\n        showInvalidDialog(ev, 'One or more fields invalid');\n      }\n    }\n\n    function joinNeat(ev) {\n      AuthService.register(\n        vm.email,\n        vm.name,\n        vm.password,\n        vm.confirm\n      ).then(function(res) {\n        if (res.user.active) {\n          login(ev);\n        }\n      }).catch(function(err) {\n        showInvalidDialog(ev, err.data.message);\n      });\n    }\n\n    function enter(ev, join) {\n      if (ev.charCode !== 13) return;\n      if (join) {\n        return joinNeat();\n      }\n      return login(ev);\n    }\n\n    function showInvalidDialog(ev, message) {\n      var dialog = $mdDialog.confirm()\n        .clickOutsideToClose(true)\n        .title('Login Failed')\n        .textContent(message)\n        .ariaLabel('Invalid login warning dialog')\n        .targetEvent(ev)\n        .ok('Try Again')\n        .cancel('Ok');\n\n      $mdDialog.show(dialog).then(function() {\n        vm.password = '';\n      });\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('MapInit', MapInit);\n\n  /** @ngInject */\n  function MapInit(\n    $window,\n    ApiKey,\n    $log,\n    $q\n  ) {\n    var doc = $window.document;\n    var asyncUrl = 'https://maps.googleapis.com/maps/api/js?key=';\n    asyncUrl += ApiKey + '&libraries=places&callback=';\n    var mapsDefer = $q.defer();\n\n    $window.GMapInitialized = mapsDefer.resolve;\n\n    function asyncLoad(asyncUrl, cbName) {\n      $log.log('adding script tag');\n      var script = doc.createElement('script');\n      script.src = asyncUrl + cbName;\n      doc.body.appendChild(script);\n    }\n    asyncLoad(asyncUrl, 'GMapInitialized');\n\n    var service = {\n      initialized: mapsDefer.promise,\n      geocoder: geocoder\n    };\n\n    function geocoder(Gmap, latLng, onceLocated) {\n      var gc = new Gmap.Geocoder;\n      gc.geocode({ location: latLng }, geocodeCb);\n\n      function geocodeCb(results, status) {\n        if (status === Gmap.GeocoderStatus.OK) {\n          if (results[0]) {\n            onceLocated(results[0]);\n          } else {\n            $window.alert('No results found');\n          }\n        } else {\n          $window.alert('Geocoder failed due to: ' + status);\n        }\n      }\n    }\n\n    return service;\n\n  } // MapInit\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('MapDialog', MapDialog);\n\n  /** @ngInject */\n  function MapDialog(\n    byId,\n    MapData,\n    MapInit,\n    mapIcons,\n    $document,\n    $log,\n    $mdDialog,\n    $mdToast,\n    $rootScope,\n    $timeout,\n    $window\n  ) {\n    var nav = $window.navigator;\n\n    var service = {\n      createInfoContent: createInfoContent,\n      initMarkerDialog: initMarkerDialog,\n      confirmDelete: confirmDelete\n    };\n\n    return service;\n\n    function createInfoContent(record) {\n      var address = '<h4>' + record.Location.address + '</h4>';\n      var severity = '<p>Severity: ' + record.severity + '</p>';\n      var description = '<p>' + (record.description || 'n/a') + '</p>';\n      var divider = '<md-divider></md-divider>';\n      var editBtn = '<button class=\"md-primary md-button\" type=\"button\"' +\n        ' aria-label=\"Edit\" id=\"edit-record-btn\">Edit</button>';\n      var delBtn = '<button class=\"md-primary md-button\" type=\"button\"' +\n        ' aria-label=\"Delete\" id=\"del-record-btn\">Delete</button>';\n      var content = address + severity + description +\n                    divider + editBtn + delBtn;\n      return content;\n    }\n\n    function initMarkerDialog(\n      types,\n      Gmap,\n      neatMap,\n      magicMarker\n    ) {\n\n      return function showDialog(ev, marker, infowindow, markers) {\n        $mdDialog.show({\n          controller: DialogController,\n          templateUrl: 'app/map/marker.dialog.html',\n          parent: angular.element($document[0].body),\n          targetEvent: ev,\n          clickOutsideToClose: true\n        });\n\n        function DialogController($scope, $mdDialog) {\n          var vm = $scope;\n          var record;\n          var isUpdate = marker ? true : false;\n          var isMapAdd;\n          $timeout(addPlaceSearch);\n\n          vm.types = types;\n          vm.severity = 3;\n          vm.cancel = cancel;\n          vm.confirm = confirm;\n          vm.locateCurrent = locateCurrent;\n\n          if (isUpdate) {\n            record = marker.myRecord;\n            vm.lat = record.Location.latitude;\n            vm.long = record.Location.longitude;\n            vm.address = record.Location.address;\n            vm.description = record.description;\n            vm.severity = record.severity;\n            vm.typeId = record.TypeId;\n            // for adding directly on the map without clicking add button\n            isMapAdd = !record.TypeId;\n          }\n\n          function addPlaceSearch() {\n            var input = byId('address');\n            var searchBox = new Gmap.places.SearchBox(input);\n\n            neatMap.addListener('bounds_changed', function() {\n              searchBox.setBounds(neatMap.getBounds());\n            });\n\n            searchBox.addListener('places_changed', function() {\n              var places = searchBox.getPlaces();\n              if (places.length === 0) return;\n              var place = places[0];\n              vm.address = place.name;\n              vm.long = place.geometry.location.lng();\n              vm.lat = place.geometry.location.lat();\n            });\n          }\n\n          function cancel() {\n            $mdDialog.cancel();\n          }\n\n          function confirm() {\n            var recordVals = {\n              long: vm.long,\n              lat: vm.lat,\n              address: vm.address,\n              description: vm.description,\n              severity: vm.severity,\n              user_id: $rootScope.me.id,\n              type_id: vm.typeId\n            };\n\n            if (isUpdate && !isMapAdd) {\n              update(recordVals);\n            } else {\n              add(recordVals);\n            }\n            $mdDialog.hide();\n          }\n\n          function add(recordVals) {\n            MapData.createRecord(recordVals)\n              .then(function(data) {\n                if (isMapAdd) {\n                  infowindow.close();\n                  confirmDelete(ev, marker, markers);\n                }\n                var newRecord = data.record;\n                newRecord.Location = {\n                  address: vm.address,\n                  latitude: vm.lat,\n                  longitude: vm.long\n                };\n                magicMarker(vm.lat, vm.long, newRecord, true);\n              });\n          }\n\n          function update(recordVals) {\n            MapData.updateRecord(record.id, recordVals)\n              .then(function(data) {\n                // closes infowindow\n                infowindow.close();\n                var newRecord = data.affected[1][0];\n                newRecord.Location = {\n                  address: vm.address,\n                  latitude: vm.lat,\n                  longitude: vm.long\n                };\n                marker.myRecord = newRecord;\n                marker.setIcon(mapIcons(\n                  types[newRecord.TypeId],\n                  newRecord.severity,\n                  Gmap\n                ));\n                marker.setPosition({\n                  lat: vm.lat,\n                  lng: vm.long\n                });\n              });\n          }\n\n          function locateCurrent() {\n            vm.address = 'Locating...';\n            vm.locating = true;\n            if (nav.geolocation) {\n              nav.geolocation.getCurrentPosition(function(pos) {\n                vm.lat = pos.coords.latitude;\n                vm.long = pos.coords.longitude;\n                MapInit.geocoder(Gmap, {\n                  lat: vm.lat, lng: vm.long\n                }, autoFillAddress);\n                function autoFillAddress(result) {\n                  vm.locating = false;\n                  vm.address = result.formatted_address;\n                  vm.$apply();\n                }\n              });\n            } else {\n              $log.error('Browser does not support goelocation');\n            }\n          }\n\n        } // dialogCtrl\n      }; // showDialog\n\n    } // initMarkerDialog\n\n    function confirmDelete(ev, marker, markers) {\n      var record = marker.myRecord;\n      if (!record.TypeId) {\n        return deleteUIcleanUp();\n      }\n\n      var address = record.Location.address;\n      var text =\n        'Inreversible. Are you sure you want to delete: ' + address + '?';\n      var confirm = $mdDialog.confirm()\n        .title('Confirm to delete')\n        .textContent(text)\n        .ariaLabel('Confirm delete')\n        .targetEvent(ev)\n        .ok('Delete')\n        .cancel('Cancel');\n\n      $mdDialog\n        .show(confirm)\n        .then(performDelete);\n\n      function performDelete() {\n        MapData.deleteRecord(marker.myRecord.id)\n          .then(deleteUIcleanUp);\n      }\n\n      function deleteUIcleanUp(data) {\n        marker.setMap(null);\n        var idx = markers.indexOf(marker);\n        if (idx > -1) {\n          markers.splice(idx, 1);\n        }\n        if (data) {\n          $log.info(data);\n        }\n      }\n    } // confirmDelete\n\n\n  } // MapDialog Service\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('MapData', MapData);\n\n  /** @ngInject */\n  function MapData(\n    url,\n    $q,\n    $log,\n    $http\n  ) {\n\n    var service = {\n      getTypes: getTypes,\n      getRecords: getRecords,\n      getFilteredRecords: getFilteredRecords,\n      createRecord: createRecord,\n      updateRecord: updateRecord,\n      deleteRecord: deleteRecord\n    };\n\n    return service;\n\n    /////////////////////////////////\n    // GET\n    // /////////////////////////////\n    function getTypes() {\n      return $http.get(url('/types'))\n        .then(getDataComplete('types'))\n        .catch(catchErrorFn('XHR getTypes failed'));\n    }\n\n    function getRecords() {\n      return $http.get(url('/records'))\n        .then(getDataComplete('records'))\n        .catch(catchErrorFn('XHR getRecords failed'));\n    }\n\n    function getFilteredRecords(chosenTypes, severity) {\n      var queryStr = '?';\n\n      if (chosenTypes.length > 0) {\n        chosenTypes = chosenTypes.join();\n        queryStr += 'ftypes=' + chosenTypes;\n        queryStr += severity > 0 ? '&' : '';\n      }\n\n      if (severity > 0) {\n        queryStr += 'fseverity=' + severity;\n      }\n\n      return $http.get(url('/records' + queryStr))\n        .then(getDataComplete('records'))\n        .catch(catchErrorFn('XHR getFilteredRecords failed'));\n    }\n\n    /////////////////////////////////\n    // Promise Fulfilled / Rejected\n    // /////////////////////////////\n    function getDataComplete(type) {\n      return function complete(data) {\n        return data.data[type];\n      };\n    }\n\n    function actionComplete(data) {\n      return data.data;\n    }\n\n    function catchErrorFn(errMsg) {\n\n      return function requestFailed(e) {\n        var newMessage = errMsg;\n        if (e.data && e.data.description) {\n          newMessage += '\\n' + e.data.description;\n        }\n        if (e.data) {\n          e.data.description = newMessage;\n        }\n        $log.error(e.data);\n        return $q.reject(e);\n      };\n    }\n\n    /////////////////////////////////\n    // POST\n    // /////////////////////////////\n    function createRecord(record) {\n      return $http.post(url('/records'), record)\n        .then(actionComplete)\n        .catch(catchErrorFn('XHR createRecord failed'));\n    }\n\n    /////////////////////////////////\n    // PUT\n    // /////////////////////////////\n    function updateRecord(id, record) {\n      return $http.put(url('/record', id), record)\n        .then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('updateRecord', id)));\n    }\n\n    /////////////////////////////////\n    // DELETE\n    // /////////////////////////////\n    function deleteRecord(id) {\n      return $http.delete(url('/record', id))\n        .then(actionComplete)\n        .catch(catchErrorFn(actionErrMsg('deleteRecord', id)));\n    }\n\n    /////////////////////////////////\n    // Helpers\n    // /////////////////////////////\n    function actionErrMsg(name, id) {\n      return 'XHR ' + name + ' by ' + id + ' failed';\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('MapController', MapController);\n\n  /** @ngInject */\n  function MapController(\n    byId,\n    MapData,\n    MapDialog,\n    mapIcons,\n    MapInit,\n    $log,\n    $mdDialog,\n    $mdSidenav,\n    $rootScope,\n    $scope,\n    $window\n  ) {\n    var vm = this;\n    var markers = [];\n    var Gmap;\n    var neatMap;\n    var mapEl;\n    var clearing = false; // for filterSeverity watch\n    var navigator = $window.navigator;\n\n    vm.toggleSideMenu = toggleSideMenu;\n    vm.filterUpdate = filterUpdate;\n    vm.filterClearAll = filterClearAll;\n    vm.getLocalMap = getLocalMap;\n\n    activate();\n\n    function activate() {\n      mapEl = byId('map');\n      MapInit.initialized\n      .then(setupMap)\n      .then(setupControls);\n    }\n\n    /////////////////////////////////\n    // Google Map Setup\n    // /////////////////////////////\n    function getLocalMap() {\n      vm.locating = true;\n      if (navigator.geolocation) {\n        navigator.geolocation.getCurrentPosition(function(pos) {\n          vm.locating = false;\n          $rootScope.mapView = {\n            center: {\n              lat: pos.coords.latitude,\n              lng: pos.coords.longitude\n            },\n            zoom: 15\n          }\n          setupMap();\n        });\n      } else {\n        $log.error('Browser does not support goelocation');\n      }\n    }\n\n    function setupMap() {\n      Gmap = $window.google.maps;\n      neatMap = new Gmap.Map(mapEl, $rootScope.mapView);\n\n      neatMap.addListener('idle', function() {\n        $rootScope.mapView = {\n          center: neatMap.getCenter(),\n          zoom: neatMap.getZoom()\n        }\n      });\n\n      clickMapToAddListener();\n\n      return getTypes()\n        .then(getRecords)\n        .then(assignRecordsToMarkers);\n    }\n\n    function clickMapToAddListener() {\n      neatMap.addListener('click', onClickAddMarker);\n\n      function onClickAddMarker(ev) {\n        MapInit.geocoder(Gmap, ev.latLng, addPlaceholder);\n      }\n    } // clickMapToAddListener\n\n    /*\n     * Map helpers\n     */\n    function addPlaceholder(result) {\n      var resetTime = 180000; // 3 min\n      var geo = result.geometry.location;\n      var lat = geo.lat();\n      var lng = geo.lng();\n      var record = {\n        Location: {\n          address: result.formatted_address,\n          latitude: lat,\n          longitude: lng\n        },\n        severity: 3\n      };\n      var marker = magicMarker(lat, lng, record, true, true);\n      setTimeout(function clearMarkerIfTooLong() {\n        MapDialog.confirmDelete(0, marker, markers);\n      }, resetTime);\n    }\n\n    function assignRecordsToMarkers(records) {\n      records.forEach(function(record) {\n        var local  = record.Location;\n        magicMarker(local.latitude, local.longitude, record);\n      });\n      return records;\n    }\n\n    function magicMarker(lat, lng, record, animate, tbd) {\n      var type = tbd ? 'placeholder' : vm.types[record.TypeId];\n      var options = {\n        position: { lat: lat, lng: lng },\n        icon: mapIcons(type, record.severity, Gmap),\n        map: neatMap,\n        myRecord: record,\n        infowindow: null\n      };\n\n      if (animate) {\n        options.animation = Gmap.Animation.DROP;\n      }\n\n      var marker = new Gmap.Marker(options);\n      attachMarkerEvent(marker);\n      markers.push(marker);\n\n      return marker;\n    }\n\n    function clearMarkers() {\n      markers.forEach(function loopMarkers(marker) {\n        marker.setMap(null);\n      });\n\n      markers = [];\n    }\n\n    function attachMarkerEvent(marker) {\n      marker.addListener('click', function() {\n        var self = this;\n\n        if (self.infowindow) {\n          var infowindow = self.infowindow;\n          self.infowindow = null;\n          return infowindow.close();\n        }\n\n        // on click create a new info window with record content\n        self.infowindow = new Gmap.InfoWindow({\n          content: MapDialog.createInfoContent(self.myRecord)\n        });\n\n        // add click listener to info window buttons\n        self.infowindow.addListener('domready', function() {\n          var editBtn = byId('edit-record-btn');\n          var delBtn = byId('del-record-btn');\n\n          editBtn.addEventListener('click', function(ev) {\n            vm.showDialog(ev, self, self.infowindow, markers);\n          });\n\n          delBtn.addEventListener('click', function(ev) {\n            MapDialog.confirmDelete(ev, self, markers);\n          });\n        });\n\n        return self.infowindow.open(neatMap, self);\n      });\n    }\n\n    /////////////////////////////////\n    // GET\n    // /////////////////////////////\n    function getTypes() {\n      return MapData.getTypes()\n      .then(function(data) {\n        vm.types = data.reduce(typeArrayToMap, {});\n        vm.filterTypes = data.map(typeArrayToFilterModel);\n        return vm.types;\n      });\n\n      function typeArrayToMap(prev, curr) {\n        prev[curr.id] = curr.name;\n        return prev;\n      }\n\n      function typeArrayToFilterModel(type) {\n        type.checked = false;\n        return type;\n      }\n    }\n\n    function getRecords() {\n      return MapData.getRecords()\n        .then(function(data) {\n          return data;\n        });\n    }\n\n    /////////////////////////////////\n    // Dialog setup\n    // /////////////////////////////\n    function setupControls() {\n      vm.showDialog = MapDialog.initMarkerDialog(\n        vm.types,\n        Gmap,\n        neatMap,\n        magicMarker\n      );\n\n      $scope.$watch('mp.filterSeverity', function(now) {\n        if (now && !clearing) {\n          vm.applySeverity = true;\n        }\n        clearing = false;\n      });\n    }\n\n    /////////////////////////////////\n    // Filter Menu\n    // /////////////////////////////\n    function toggleSideMenu() {\n      return $mdSidenav('left').toggle();\n    }\n\n    function filterUpdate() {\n      var chosenTypes = vm.filterTypes.reduce(toTypeIdArray, []);\n      // reset markers before update\n      clearMarkers();\n      // if nothing is chosen, do nothing\n      if (chosenTypes.length === 0 && !vm.applySeverity) {\n        return getRecords()\n          .then(assignRecordsToMarkers);\n      }\n      // selecting all types is the same as selecting none: return all\n      if (chosenTypes.length === vm.filterTypes.length) {\n        chosenTypes = [];\n      }\n      // severity 0 to prevent applying severity filter for MapData service\n      var fSeverity = vm.applySeverity ? vm.filterSeverity : 0;\n\n      return MapData.getFilteredRecords(chosenTypes, fSeverity)\n        .then(assignRecordsToMarkers);\n\n      function toTypeIdArray(types, curr) {\n        if (curr.checked) {\n          types.push(curr.id);\n        }\n        return types;\n      }\n    }\n\n    function filterClearAll() {\n      clearing = true;\n      vm.filterTypes.forEach(clearAllTypes);\n      vm.filterSeverity = 1;\n      vm.applySeverity = false;\n\n      function clearAllTypes(type) {\n        type.checked = false;\n      }\n      return;\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('NavController', NavController);\n\n  /** @ngInject */\n  function NavController(\n    AuthService,\n    $state\n  ) {\n    var vm = this;\n\n    vm.logout = logout;\n    vm.join = join;\n\n    function logout() {\n      AuthService.logout();\n      $state.go('login');\n    }\n\n    function join(argument) {\n      $state.go('join');\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .controller('TitleController', TitleController);\n\n  /** @ngInject */\n  function TitleController(\n    $rootScope\n  ) {\n    var vm = this;\n    var titles = {\n      map: 'Map',\n      users: 'Users',\n      join: 'Join Neat',\n      login: 'Login'\n    };\n\n    $rootScope.$on('$stateChangeSuccess', watchTitle);\n\n    function watchTitle(e, toState) {\n      vm.title = 'Neat | ' + titles[toState.name];\n    }\n\n  }\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('AuthToken', AuthToken);\n\n  /** @ngInject */\n  function AuthToken(\n    $window\n  ) {\n\n    var service = {\n      getToken: getToken,\n      setToken: setToken\n    };\n\n    return service;\n\n    function getToken() {\n      return $window.localStorage.getItem('token');\n    }\n\n    function setToken(token) {\n      if (token) {\n        $window.localStorage.setItem('token', token);\n      } else {\n        $window.localStorage.removeItem('token');\n      }\n    }\n\n  } // AuthToken\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('AuthService', AuthService);\n\n  /** @ngInject */\n  function AuthService(\n    AuthToken,\n    $http,\n    $q,\n    $log,\n    $rootScope,\n    url\n  ) {\n\n    var service = {\n      register: register,\n      login: login,\n      logout: logout,\n      isLoggedIn: isLoggedIn,\n      isAdmin: isAdmin,\n      isSelf: isSelf,\n      getMe: getMe\n    };\n\n    return service;\n\n    function register(email, name, password, confirm) {\n      return $http.put(url('/register'), {\n        email: email,\n        name: name,\n        password: password,\n        confirm: confirm\n      }).then(registrationComplete)\n        .catch(registrationFailed);\n\n      function registrationComplete(data) {\n        return data.data;\n      }\n\n      function registrationFailed(e) {\n        $log.error(e.data);\n        return $q.reject(e);\n      }\n    }\n\n    function login(email, password) {\n      // make sure to clear user, useful for register\n      logout();\n\n      return $http.post(url('/authenticate'), {\n        email: email,\n        password: password\n      }).then(authSuccess)\n        .catch(authFailed);\n\n      function authSuccess(data) {\n        AuthToken.setToken(data.data.token);\n        return data.data;\n      }\n\n      function authFailed(e) {\n        AuthToken.setToken();\n        $log.error(e.data);\n        return $q.reject(e.data);\n      }\n    }\n\n    function logout() {\n      AuthToken.setToken();\n      $rootScope.me = {};\n    }\n\n    function isLoggedIn() {\n      return AuthToken.getToken() ? true : false;\n    }\n\n    function isAdmin() {\n      return Boolean($rootScope.me) && $rootScope.me.privilege == 'A';\n    }\n\n    function isSelf(id) {\n      return $rootScope.me && $rootScope.me.id == id;\n    }\n\n    function getMe() {\n      return $http.get(url('/me'))\n        .then(getMeComplete)\n        .catch(getMeFailed);\n\n      function getMeComplete(data) {\n        var me = data.data.user;\n        $rootScope.me = me;\n        $log.info('Added me');\n        return me;\n      }\n\n      function getMeFailed(e) {\n        $log.error(e.data);\n        return $q.reject(e);\n      }\n    }\n\n  } // AuthService\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .factory('AuthInterceptor', AuthInterceptor);\n\n  /** @ngInject */\n  function AuthInterceptor(\n    $q,\n    AuthToken\n  ) {\n\n    var service = {\n      request: request,\n      responseError: responseError\n    };\n\n    return service;\n\n    function request(config) {\n      var token = AuthToken.getToken();\n      if (token) {\n        config.headers.Authorization = 'Bearer ' + token;\n      }\n      return config;\n    }\n\n    function responseError(res) {\n      if (res.status == 403) {\n        AuthToken.setToken();\n      }\n      return $q.reject(res);\n    }\n\n  } // AuthInterceptor\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .run(runBlock);\n\n  /** @ngInject */\n  function runBlock(\n    $log,\n    $rootScope,\n    $state,\n    AuthService\n  ) {\n\n    // map defaults\n    $rootScope.mapView = {\n      center: {\n        lat: 44.4120908,\n        lng: -79.6701331\n      },\n      zoom: 15\n    }\n\n    $rootScope.$on('$stateChangeStart', watchAuth);\n\n    function watchAuth(e, toState) {\n      var isLoggedIn = AuthService.isLoggedIn();\n\n      if (toState.name === 'join') {\n        return;\n      }\n\n      if (toState.name === 'login') {\n        if (isLoggedIn) {\n          e.preventDefault();\n          $state.go('map');\n        }\n        return;\n      }\n\n      if (isLoggedIn) {\n        if (!$rootScope.me || !$rootScope.me.privilege) {\n          AuthService.getMe().then(function() {\n            $log.info('Readded me');\n          });\n        }\n      } else {\n        e.preventDefault();\n        $state.go('login');\n      }\n    }\n\n    $log.debug('runBlock end');\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .config(routerConfig);\n\n  /** @ngInject */\n  function routerConfig(\n    $stateProvider,\n    $locationProvider,\n    $urlRouterProvider\n  ) {\n    var navView = {\n      templateUrl: 'app/layout/nav.html',\n      controller: 'NavController',\n      controllerAs: 'nv'\n    };\n\n    $stateProvider\n      .state('map', {\n        url: '/',\n        views: {\n          nav: navView,\n          content: {\n            templateUrl: 'app/map/map.html',\n            controller: 'MapController',\n            controllerAs: 'mp'\n          }\n        }\n      })\n      .state('users', {\n        url: '/users',\n        views: {\n          nav: navView,\n          content: {\n            templateUrl: 'app/users/users.html',\n            controller: 'UsersController',\n            controllerAs: 'us'\n          }\n        }\n      })\n      .state('join', {\n        url: '/join',\n        views: {\n          content: {\n            templateUrl: 'app/login/join.html',\n            controller: 'AuthController',\n            controllerAs: 'au'\n          }\n        }\n      })\n      .state('login', {\n        url: '/login',\n        views: {\n          content: {\n            templateUrl: 'app/login/login.html',\n            controller: 'AuthController',\n            controllerAs: 'au'\n          }\n        }\n      });\n\n    $urlRouterProvider.otherwise('/');\n    $locationProvider.html5Mode(true);\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .constant('ApiKey', 'AIzaSyC_I1rGTiTnBiYQmCFou6xYWzC1rR3QetM')\n    .constant('mapIcons', mapIcons)\n    .constant('byId', byId)\n    .constant('url', url);\n\n  function mapIcons(type, level, Gmap) {\n    type = type.toLowerCase();\n    var levels = {\n      1: '-green',\n      2: '-yellow',\n      3: '-yellow',\n      4: '-red',\n      5: '-red'\n    };\n    var url = '../assets/images/';\n    if (type == 'placeholder') {\n      url += type + '.svg';\n    } else {\n      url += type.replace(' ', '-') + levels[level] + '.svg';\n    }\n    return {\n      url: url,\n      anchor: new Gmap.Point(28, 28)\n    };\n  }\n\n  function byId(id) {\n    return document.getElementById(id);\n  }\n\n  function url(path, id) {\n    var baseUrl = 'https://neatmap.xyz/api';\n    // var baseUrl = 'http://localhost:4000/api';\n    path = baseUrl + path;\n    if (id) path += '/' + id;\n    return path;\n  }\n\n})();\n\n(function() {\n  'use strict';\n\n  angular\n    .module('neatClient')\n    .config(config);\n\n  /** @ngInject */\n  function config(\n    $logProvider,\n    $httpProvider,\n    $mdThemingProvider,\n    $mdIconProvider\n  ) {\n    // Enable log\n    $logProvider.debugEnabled(true);\n\n    $httpProvider.interceptors.push('AuthInterceptor');\n\n    // Custom themes\n    var neatGrey = $mdThemingProvider.extendPalette('blue-grey', {\n      '900': '#1f2532'\n    });\n    var neatRed = $mdThemingProvider.extendPalette('red', {\n      '400': '#ff5252'\n    });\n\n    $mdThemingProvider\n      .definePalette('neatGrey', neatGrey)\n      .definePalette('neatRed', neatRed)\n      .theme('default')\n      .primaryPalette('neatRed', {\n        'default': '400'\n      })\n      .accentPalette('neatGrey', {\n        'default': '900',\n        'hue-2': '500'\n      })\n      .warnPalette('orange');\n\n    // Register icons\n    $mdIconProvider\n      .icon('logo-header', '/assets/images/logo-header.svg')\n      .icon('logo-login', '/assets/images/logo-login.svg');\n  }\n\n})();\n\nangular.module(\"neatClient\").run([\"$templateCache\", function($templateCache) {$templateCache.put(\"app/layout/nav.html\",\"<md-toolbar layout=\\\"row\\\" class=\\\"md-accent md-whiteframe-4dp pos-fixed\\\"><md-button flex=\\\"20\\\" aria-label=\\\"App Logo, Go to Home\\\"><a ui-sref=\\\"map\\\"><md-icon md-svg-icon=\\\"logo-header\\\" class=\\\"head-logo\\\"></md-icon></a></md-button><nav flex=\\\"60\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><a class=\\\"nav-link\\\" ui-sref=\\\"map\\\" ui-sref-active=\\\"nav-link--active\\\" md-ink-ripple=\\\"\\\">Map</a> <a class=\\\"nav-link\\\" ui-sref=\\\"users\\\" ui-sref-active=\\\"nav-link--active\\\" md-ink-ripple=\\\"\\\">Users</a></nav><span flex=\\\"20\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\"><md-menu><md-button ng-click=\\\"$mdOpenMenu($event)\\\"><i class=\\\"material-icons mi--mid\\\">account_circle</i> {{me.name.split(\\' \\')[0]}}</md-button><md-menu-content><md-menu-item><p>{{me.name}}</p></md-menu-item><md-menu-item><md-button class=\\\"md-primary\\\" ng-click=\\\"nv.logout()\\\">Logout</md-button></md-menu-item><md-menu-item><md-button class=\\\"md-accent md-hue-2\\\" ng-click=\\\"nv.join()\\\">New User</md-button></md-menu-item></md-menu-content></md-menu></span></md-toolbar>\");\n$templateCache.put(\"app/login/join.html\",\"<md-content class=\\\"dark-bg\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\" layout-fill=\\\"\\\"><md-card flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" class=\\\"login-box md-whiteframe-6dp\\\"><div style=\\\"height:70px\\\"><md-icon md-svg-icon=\\\"logo-login\\\" class=\\\"join-logo\\\"></md-icon></div><form name=\\\"joinForm\\\" class=\\\"login-form\\\"><div layout=\\\"column\\\"><md-input-container><label>Email</label> <input name=\\\"email\\\" type=\\\"email\\\" required=\\\"\\\" ng-pattern=\\\"/^.+@.+\\\\..+$/\\\" ng-model=\\\"au.email\\\"><div ng-messages=\\\"joinForm.email.$error\\\"><div ng-message=\\\"required\\\">Email Required</div><div ng-message=\\\"pattern\\\">Invalid Email</div></div></md-input-container><md-input-container><label>Name</label> <input name=\\\"name\\\" ng-model=\\\"au.name\\\"></md-input-container><md-input-container><label>Password</label> <input type=\\\"password\\\" name=\\\"password\\\" required=\\\"\\\" ng-model=\\\"au.password\\\"><div ng-messages=\\\"joinForm.password.$error\\\"><div ng-message=\\\"required\\\">Password required</div></div></md-input-container><md-input-container><label>Confirm Password</label> <input type=\\\"password\\\" name=\\\"confirm\\\" ng-keypress=\\\"au.enter($event, true)\\\" required=\\\"\\\" ng-model=\\\"au.confirm\\\"><div ng-messages=\\\"joinForm.confirm.$error\\\"><div ng-message=\\\"required\\\">Confirm Password required</div></div></md-input-container></div></form><md-card-actions layout=\\\"column\\\"><md-button class=\\\"login-btn md-raised md-primary\\\" ng-click=\\\"au.join($event)\\\">Join Neat</md-button></md-card-actions></md-card></md-content>\");\n$templateCache.put(\"app/login/login.html\",\"<md-content class=\\\"dark-bg\\\" layout=\\\"row\\\" layout-align=\\\"center center\\\" layout-fill=\\\"\\\"><md-card flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" class=\\\"login-box md-whiteframe-6dp\\\"><div style=\\\"height:140px\\\"><md-icon md-svg-icon=\\\"logo-login\\\" class=\\\"login-logo\\\"></md-icon></div><form name=\\\"loginForm\\\" class=\\\"login-form\\\"><div layout=\\\"column\\\"><md-input-container><label>Email</label> <input name=\\\"email\\\" type=\\\"email\\\" required=\\\"\\\" ng-pattern=\\\"/^.+@.+\\\\..+$/\\\" ng-model=\\\"au.email\\\"><div ng-messages=\\\"loginForm.email.$error\\\"><div ng-message=\\\"required\\\">Email Required</div><div ng-message=\\\"pattern\\\">Invalid Email</div></div></md-input-container><md-input-container><label>Password</label> <input type=\\\"password\\\" name=\\\"password\\\" ng-keypress=\\\"au.enter($event)\\\" required=\\\"\\\" ng-model=\\\"au.password\\\"><div ng-messages=\\\"loginForm.password.$error\\\"><div ng-message=\\\"required\\\">Password required</div></div></md-input-container></div></form><md-card-actions layout=\\\"column\\\"><md-button class=\\\"login-btn md-raised md-primary\\\" ng-click=\\\"au.login($event)\\\">Login</md-button></md-card-actions></md-card></md-content>\");\n$templateCache.put(\"app/map/map.html\",\"<md-sidenav class=\\\"md-sidenav-left\\\" md-component-id=\\\"left\\\" md-whiteframe=\\\"4\\\"><md-toolbar><h1 class=\\\"md-toolbar-tools\\\"><i class=\\\"material-icons mi--mid\\\" style=\\\"margin-right:10px\\\">blur_circular</i> Filter Records</h1></md-toolbar><div layout=\\\"column\\\" layout-padding=\\\"\\\" layout-margin=\\\"\\\"><h4 class=\\\"md-subhead\\\">Type</h4><div layout=\\\"row\\\" layout-wrap=\\\"\\\"><md-checkbox class=\\\"md-primary\\\" flex=\\\"45\\\" ng-repeat=\\\"type in mp.filterTypes\\\" ng-model=\\\"type.checked\\\" aria-label=\\\"{{type.name}} checkbox\\\">{{type.name}}</md-checkbox></div><md-checkbox class=\\\"md-primary\\\" style=\\\"margin-left:16px\\\" ng-model=\\\"mp.applySeverity\\\" aria-label=\\\"Apply severity filter checkbox\\\">Severity: {{mp.applySeverity ? mp.filterSeverity : \\'n/a\\'}}</md-checkbox><md-slider class=\\\"md-primary\\\" ng-model=\\\"mp.filterSeverity\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"5\\\" aria-label=\\\"severity filter slider\\\" md-discrete=\\\"\\\"></md-slider><div layout=\\\"row\\\" layout-wrap=\\\"\\\"><md-button class=\\\"md-primary\\\" ng-click=\\\"mp.filterClearAll()\\\">Clear All</md-button><md-button class=\\\"md-raised md-primary\\\" ng-click=\\\"mp.filterUpdate()\\\">Update</md-button><md-button ng-click=\\\"mp.toggleSideMenu()\\\">Cancel</md-button></div></div></md-sidenav><div ng-if=\\\"mp.locating\\\"><md-progress-linear class=\\\"map-progress\\\" md-mode=\\\"indeterminate\\\"></md-progress-linear></div><md-button class=\\\"md-fab md-fab--lg md-fab--search pos-fixed\\\" ng-click=\\\"mp.toggleSideMenu()\\\" aria-label=\\\"Filter markers\\\"><i class=\\\"material-icons mi--mid\\\">assignment</i></md-button><md-fab-speed-dial class=\\\"md-scale pos-fixed md-fab--add\\\" md-direction=\\\"up\\\"><md-fab-trigger><md-button class=\\\"md-fab md-primary md-fab--lg\\\" aria-label=\\\"map function menu\\\"><i class=\\\"material-icons mi--mid\\\">more_vert</i></md-button></md-fab-trigger><md-fab-actions><md-button class=\\\"md-fab md-raised md-mini\\\" ng-click=\\\"mp.filterUpdate()\\\" aria-label=\\\"refresh markers\\\"><i class=\\\"material-icons mi--mid\\\">refresh</i></md-button><md-button class=\\\"md-fab md-raised md-mini md-primary\\\" ng-click=\\\"mp.showDialog($event)\\\" aria-label=\\\"Add new marker\\\"><i class=\\\"material-icons mi--mid\\\">add_location</i></md-button><md-button class=\\\"md-fab md-raised md-mini\\\" ng-click=\\\"mp.getLocalMap()\\\" aria-label=\\\"Locate current map view\\\"><i class=\\\"material-icons mi--mid\\\">my_location</i></md-button></md-fab-actions></md-fab-speed-dial><div layout=\\\"row\\\" id=\\\"map\\\" layout-fill=\\\"\\\"></div>\");\n$templateCache.put(\"app/map/marker.dialog.html\",\"<md-dialog aria-label=\\\"Add Marker\\\" flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" layout-padding=\\\"\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><h3 class=\\\"md-headline\\\">Add Marker</h3><form name=\\\"markerForm\\\"><div layout=\\\"column\\\"><div layout=\\\"row\\\" layout-align=\\\"center center\\\"><md-input-container md-no-float=\\\"\\\" flex=\\\"90\\\"><input name=\\\"address\\\" id=\\\"address\\\" type=\\\"text\\\" placeholder=\\\"Location\\\" ng-model=\\\"address\\\"></md-input-container><span ng-if=\\\"locating\\\" flex=\\\"10\\\"><md-progress-circular md-mode=\\\"indeterminate\\\" md-diameter=\\\"20\\\"></md-progress-circular></span> <span ng-if=\\\"!locating\\\" flex=\\\"10\\\"><md-button class=\\\"md-icon-button md-primary\\\" ng-click=\\\"locateCurrent()\\\" aria-label=\\\"current location\\\"><i class=\\\"material-icons\\\">my_location</i></md-button></span></div><md-input-container><label>Type</label><md-select ng-model=\\\"typeId\\\"><md-option ng-repeat=\\\"(key, type) in types\\\" value=\\\"{{key}}\\\">{{type}}</md-option></md-select></md-input-container><md-input-container><label>Description</label> <textarea ng-model=\\\"description\\\" md-maxlength=\\\"240\\\" row=\\\"3\\\"></textarea></md-input-container><h4 class=\\\"md-subhead\\\">Severity</h4><md-slider class=\\\"md-primary\\\" ng-model=\\\"severity\\\" step=\\\"1\\\" min=\\\"1\\\" max=\\\"5\\\" aria-label=\\\"severity\\\" md-discrete=\\\"\\\"></md-slider></div></form></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"cancel()\\\" class=\\\"md-primary\\\">Cancel</md-button><md-button ng-click=\\\"confirm()\\\" class=\\\"md-primary\\\">Save</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/users/add.dialog.html\",\"<md-dialog aria-label=\\\"Add User\\\" flex=\\\"30\\\" flex-md=\\\"40\\\" flex-sm=\\\"55\\\" flex-xs=\\\"90\\\" layout-padding=\\\"\\\"><md-dialog-content><div class=\\\"md-dialog-content\\\"><h3 class=\\\"md-headline\\\">Add User</h3><form name=\\\"userForm\\\"><div layout=\\\"column\\\"><md-input-container class=\\\"user-form-input\\\"><label>Email</label> <input type=\\\"email\\\" name=\\\"email\\\" required=\\\"\\\" ng-pattern=\\\"/^.+@.+\\\\..+$/\\\" ng-model=\\\"email\\\"><div ng-messages=\\\"userForm.email.$error\\\"><div ng-message=\\\"required\\\">Email Required</div><div ng-message=\\\"pattern\\\">Invalid Email</div></div></md-input-container><md-input-container class=\\\"user-form-input\\\"><label>Name</label> <input ng-model=\\\"name\\\"></md-input-container><h4 class=\\\"md-subhead\\\">User Role</h4><md-radio-group ng-model=\\\"privilege\\\"><md-radio-button value=\\\"M\\\" class=\\\"md-primary btn-role\\\">Member</md-radio-button><md-radio-button value=\\\"A\\\" class=\\\"md-primary btn-role\\\">Admin</md-radio-button></md-radio-group></div></form></div></md-dialog-content><md-dialog-actions><md-button ng-click=\\\"cancel()\\\" class=\\\"md-primary\\\">Cancel</md-button><md-button ng-click=\\\"add()\\\" class=\\\"md-primary\\\">Save</md-button></md-dialog-actions></md-dialog>\");\n$templateCache.put(\"app/users/users.html\",\"<div class=\\\"light-bg nav-padding\\\" layout=\\\"column\\\" layout-fill=\\\"\\\"><div layout=\\\"row\\\" layout-align=\\\"center start\\\"><md-content class=\\\"light-bg user-content\\\" flex=\\\"50\\\" flex-lg=\\\"60\\\" flex-md=\\\"70\\\" flex-sm=\\\"90\\\" flex-xs=\\\"100\\\"><md-subheader class=\\\"user-subheader\\\"><md-menu><md-button class=\\\"md-btn--shrink\\\" ng-disabled=\\\"!us.isAdmin()\\\" ng-click=\\\"$mdOpenMenu($event)\\\">{{ us.showEnabled ? \\'Enabled Users\\' : \\'Disabled Users\\' }} <i class=\\\"material-icons mi--mid\\\">expand_more</i></md-button><md-menu-content><md-menu-item><md-button ng-disabled=\\\"true\\\">{{ us.showEnabled ? \\'Enabled Users\\' : \\'Disabled Users\\' }}</md-button></md-menu-item><md-menu-item><md-button ng-click=\\\"us.switchUsers()\\\">{{ !us.showEnabled ? \\'Enabled Users\\' : \\'Disabled Users\\' }}</md-button></md-menu-item></md-menu-content></md-menu><md-input-container class=\\\"user-search\\\" md-no-float=\\\"\\\"><input id=\\\"user-search\\\" type=\\\"text\\\" ng-model=\\\"us.search\\\" placeholder=\\\"Search\\\"></md-input-container></md-subheader><md-list><md-list-item class=\\\"md-2-line\\\" ng-repeat=\\\"user in us.users | filter:us.search\\\" ng-click=\\\"null\\\"><div class=\\\"md-list-item-text\\\" layout=\\\"column\\\"><h3>{{ user.name }}</h3><p>{{ user.email }}</p></div><md-menu class=\\\"md-secondary\\\" hide-md=\\\"\\\" hide-sm=\\\"\\\" hide-xs=\\\"\\\"><md-button ng-class=\\\"us.roleClass(user.privilege)\\\" ng-disabled=\\\"us.btnDisabled(user, \\'role\\')\\\" ng-click=\\\"$mdOpenMenu($event)\\\">{{ user.privilege == \\'A\\' ? \\'Admin\\' : \\'Member\\' }} <i class=\\\"material-icons mi--mid\\\">arrow_drop_down</i></md-button><md-menu-content><md-menu-item><md-button ng-disabled=\\\"true\\\">{{ user.privilege == \\'A\\' ? \\'Admin\\' : \\'Member\\' }}</md-button></md-menu-item><md-menu-item><md-button ng-click=\\\"us.changeRole(user)\\\">{{ user.privilege != \\'A\\' ? \\'Admin\\' : \\'Member\\' }}</md-button></md-menu-item></md-menu-content></md-menu><md-button class=\\\"md-secondary md-primary\\\" ng-if=\\\"us.isAdmin()\\\" ng-disabled=\\\"us.btnDisabled(user, \\'reset\\')\\\" ng-click=\\\"us.showConfirm($event,$index,us.resetText(user),user,us.users)\\\" hide-xs=\\\"\\\">{{ us.resetText(user) }}</md-button><md-button class=\\\"md-secondary md-accent md-hue-1\\\" ng-disabled=\\\"us.btnDisabled(user)\\\" ng-click=\\\"us.showConfirm($event,$index,\\'del\\',user,us.users)\\\" aria-label=\\\"Delete user\\\"><i class=\\\"material-icons mi--mid\\\">{{ user.disabled ? \\'delete_forever\\' : \\'delete\\' }}</i></md-button><md-divider></md-divider></md-list-item></md-list></md-content></div><md-button class=\\\"md-fab md-fab--lg md-fab--search pos-fixed\\\" ng-click=\\\"us.focusSearch()\\\" aria-label=\\\"Search user\\\"><i class=\\\"material-icons mi--mid\\\">search</i></md-button><md-button class=\\\"md-fab md-primary md-fab--lg md-fab--add pos-fixed\\\" ng-if=\\\"us.isAdmin()\\\" ng-click=\\\"us.addOrDeleteAll($event)\\\" aria-label=\\\"Add user\\\"><i class=\\\"material-icons mi--mid\\\">{{ us.showEnabled ? \\'add\\' : \\'delete_sweep\\' }}</i></md-button></div>\");}]);"],"sourceRoot":"/source/"}